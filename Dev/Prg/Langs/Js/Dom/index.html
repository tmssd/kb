
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../../Md/">
      
      <link rel="icon" href="../../../../../assets/favicon.svg">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.6">
    
    
      
        <title>DOM - tskb</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.558e4712.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../css/timeago.css">
    
      <link rel="stylesheet" href="../../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#document-object-model" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../.." title="tskb" class="md-header__button md-logo" aria-label="tskb" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5V2M6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            tskb
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              DOM
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/tmssd/kb" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    tmssd/kb
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../../Blockchain/" class="md-tabs__link md-tabs__link--active">
        Dev
      </a>
    </li>
  

  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="tskb" class="md-nav__button md-logo" aria-label="tskb" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5V2M6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5Z"/></svg>

    </a>
    tskb
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/tmssd/kb" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    tmssd/kb
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2" tabindex="0" aria-expanded="true">
          Dev
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Dev" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Dev
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../Blockchain/">Blockchain</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Blockchain" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          Blockchain
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../Cicd/">CI/CD</a>
          
        </div>
      
      <nav class="md-nav" aria-label="CI/CD" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          CI/CD
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_3" tabindex="0" aria-expanded="false">
          Cloud
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Cloud" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Cloud
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_3_1" type="checkbox" id="__nav_2_3_1" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../Cloud/Aws/">Aws</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Aws" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_3_1">
          <span class="md-nav__icon md-icon"></span>
          Aws
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_3_2" type="checkbox" id="__nav_2_3_2" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../Cloud/Nextcloud/">Nextcloud</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Nextcloud" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_3_2">
          <span class="md-nav__icon md-icon"></span>
          Nextcloud
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_3_3" type="checkbox" id="__nav_2_3_3" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../Cloud/Vps/">Vps</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Vps" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_3_3">
          <span class="md-nav__icon md-icon"></span>
          Vps
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_4" type="checkbox" id="__nav_2_4" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../Containerization/">Containerization</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Containerization" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          Containerization
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_5" type="checkbox" id="__nav_2_5" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../Cs/">Cs</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Cs" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_5">
          <span class="md-nav__icon md-icon"></span>
          Cs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_6" type="checkbox" id="__nav_2_6" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../Db/">Db</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Db" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_6">
          <span class="md-nav__icon md-icon"></span>
          Db
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_7" type="checkbox" id="__nav_2_7" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../Network/">Network</a>
          
            <label for="__nav_2_7">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Network" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_7">
          <span class="md-nav__icon md-icon"></span>
          Network
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_7_2" type="checkbox" id="__nav_2_7_2" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../Network/Nginx/">Nginx</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Nginx" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_7_2">
          <span class="md-nav__icon md-icon"></span>
          Nginx
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_7_3" type="checkbox" id="__nav_2_7_3" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../Network/Traefik/">Traefik</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Traefik" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_7_3">
          <span class="md-nav__icon md-icon"></span>
          Traefik
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_2_8" type="checkbox" id="__nav_2_8" checked>
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_8" tabindex="0" aria-expanded="true">
          Prg
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Prg" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_8">
          <span class="md-nav__icon md-icon"></span>
          Prg
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_8_1" type="checkbox" id="__nav_2_8_1" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../DevRes/">Dev Resources</a>
          
            <label for="__nav_2_8_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Dev Resources" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_8_1">
          <span class="md-nav__icon md-icon"></span>
          Dev Resources
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../DevRes/Dev-roadmaps/" class="md-nav__link">
        Dev Roadmaps
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_8_2" type="checkbox" id="__nav_2_8_2" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_8_2" tabindex="0" aria-expanded="false">
          Concepts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Concepts" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_8_2">
          <span class="md-nav__icon md-icon"></span>
          Concepts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_8_2_1" type="checkbox" id="__nav_2_8_2_1" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../Concepts/Authentication/">Authentication</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Authentication" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_8_2_1">
          <span class="md-nav__icon md-icon"></span>
          Authentication
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_8_2_2" type="checkbox" id="__nav_2_8_2_2" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../Concepts/General-concepts/">General concepts</a>
          
        </div>
      
      <nav class="md-nav" aria-label="General concepts" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_8_2_2">
          <span class="md-nav__icon md-icon"></span>
          General concepts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_8_3" type="checkbox" id="__nav_2_8_3" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_8_3" tabindex="0" aria-expanded="false">
          Design
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Design" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_8_3">
          <span class="md-nav__icon md-icon"></span>
          Design
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_8_3_1" type="checkbox" id="__nav_2_8_3_1" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../Design/WebDesign/">Web Design</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Web Design" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_8_3_1">
          <span class="md-nav__icon md-icon"></span>
          Web Design
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_8_4" type="checkbox" id="__nav_2_8_4" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_8_4" tabindex="0" aria-expanded="false">
          IDE
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IDE" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_8_4">
          <span class="md-nav__icon md-icon"></span>
          IDE
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_8_4_1" type="checkbox" id="__nav_2_8_4_1" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../IDE/VSCode/">VSCode</a>
          
        </div>
      
      <nav class="md-nav" aria-label="VSCode" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_8_4_1">
          <span class="md-nav__icon md-icon"></span>
          VSCode
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_2_8_5" type="checkbox" id="__nav_2_8_5" checked>
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_8_5" tabindex="0" aria-expanded="true">
          Langs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Langs" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_8_5">
          <span class="md-nav__icon md-icon"></span>
          Langs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_8_5_1" type="checkbox" id="__nav_2_8_5_1" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../Css/">Css</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Css" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_8_5_1">
          <span class="md-nav__icon md-icon"></span>
          Css
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_8_5_2" type="checkbox" id="__nav_2_8_5_2" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../Html/">Html</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Html" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_8_5_2">
          <span class="md-nav__icon md-icon"></span>
          Html
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_2_8_5_3" type="checkbox" id="__nav_2_8_5_3" checked>
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">Js</a>
          
            <label for="__nav_2_8_5_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Js" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_8_5_3">
          <span class="md-nav__icon md-icon"></span>
          Js
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          DOM
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        DOM
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#preface-browser-environment-specs" class="md-nav__link">
    Preface: Browser environment, specs
  </a>
  
    <nav class="md-nav" aria-label="Preface: Browser environment, specs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#browser-environment" class="md-nav__link">
    Browser environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specs" class="md-nav__link">
    Specs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dom-essentials" class="md-nav__link">
    DOM Essentials
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dom-tree" class="md-nav__link">
    DOM Tree
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#walking-the-dom" class="md-nav__link">
    Walking the DOM
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#searching-the-dom" class="md-nav__link">
    Searching the DOM
  </a>
  
    <nav class="md-nav" aria-label="Searching the DOM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-getelements" class="md-nav__link">
    Using getElement(s)*
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-queryselector" class="md-nav__link">
    Using querySelector*
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dom-selectors-summary-table" class="md-nav__link">
    DOM selectors summary table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-useful-methods" class="md-nav__link">
    Additional useful methods
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changing-the-dom" class="md-nav__link">
    Changing the DOM
  </a>
  
    <nav class="md-nav" aria-label="Changing the DOM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changing-nodes-content" class="md-nav__link">
    Changing nodes content
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creation-insertion-removal-of-nodes" class="md-nav__link">
    Creation, insertion, removal of nodes
  </a>
  
    <nav class="md-nav" aria-label="Creation, insertion, removal of nodes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creation" class="md-nav__link">
    Creation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#insertion-and-removal" class="md-nav__link">
    Insertion and removal
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#insertion-and-removalold-school-methods" class="md-nav__link">
    Insertion and removal(“old school” methods)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changing-element-properties-class-style" class="md-nav__link">
    Changing element properties: class, style
  </a>
  
    <nav class="md-nav" aria-label="Changing element properties: class, style">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#class" class="md-nav__link">
    class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#style" class="md-nav__link">
    style
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#styles-working-tips" class="md-nav__link">
    styles: working tips
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#html-attributes-vs-dom-properties" class="md-nav__link">
    HTML attributes vs. DOM properties
  </a>
  
    <nav class="md-nav" aria-label="HTML attributes vs. DOM properties">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dom-properties" class="md-nav__link">
    DOM properties
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#html-attributes" class="md-nav__link">
    HTML attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#property-attribute-synchronization" class="md-nav__link">
    Property-attribute synchronization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#non-standard-attributes-use-cases" class="md-nav__link">
    Non-standard attributes use cases
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dataset-dom-property" class="md-nav__link">
    dataset DOM property
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dom-events" class="md-nav__link">
    DOM Events
  </a>
  
    <nav class="md-nav" aria-label="DOM Events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#event-handlers" class="md-nav__link">
    Event handlers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-object" class="md-nav__link">
    Event object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bubbling-and-capturing" class="md-nav__link">
    Bubbling and capturing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-delegation" class="md-nav__link">
    Event delegation
  </a>
  
    <nav class="md-nav" aria-label="Event delegation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#delegation-examples" class="md-nav__link">
    Delegation examples
  </a>
  
    <nav class="md-nav" aria-label="Delegation examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-example-highlight-a-cell-td-on-click" class="md-nav__link">
    basic example: highlight a cell &lt;td&gt; on click
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#actions-in-markup" class="md-nav__link">
    actions in markup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-behavior-pattern" class="md-nav__link">
    The “behavior” pattern
  </a>
  
    <nav class="md-nav" aria-label="The “behavior” pattern">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-counter" class="md-nav__link">
    example: counter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-toggler" class="md-nav__link">
    example: toggler
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#browser-default-actions" class="md-nav__link">
    Browser default actions
  </a>
  
    <nav class="md-nav" aria-label="Browser default actions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#preventing-browser-actions" class="md-nav__link">
    Preventing browser actions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dispatching-custom-eventstodo" class="md-nav__link">
    Dispatching custom events(TODO)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ui-events" class="md-nav__link">
    UI Events
  </a>
  
    <nav class="md-nav" aria-label="UI Events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mouse-events" class="md-nav__link">
    Mouse events
  </a>
  
    <nav class="md-nav" aria-label="Mouse events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mouse-event-properties" class="md-nav__link">
    Mouse event properties
  </a>
  
    <nav class="md-nav" aria-label="Mouse event properties">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mouse-button" class="md-nav__link">
    mouse button
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modifiers-shift-alt-ctrl-and-meta" class="md-nav__link">
    modifiers: shift, alt, ctrl and meta
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coordinates" class="md-nav__link">
    coordinates
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preventing-selection-on-mousedown" class="md-nav__link">
    Preventing selection on mousedown
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#moving-the-mouse" class="md-nav__link">
    Moving the mouse
  </a>
  
    <nav class="md-nav" aria-label="Moving the mouse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mouseoverout" class="md-nav__link">
    mouseover/out
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mouseenterleave" class="md-nav__link">
    mouseenter/leave
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-delegation-example" class="md-nav__link">
    event delegation example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dragndrop-with-mouse-eventstodo" class="md-nav__link">
    Drag'n'Drop with mouse events(TODO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pointer-eventstodo" class="md-nav__link">
    Pointer events(TODO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keyboard-events" class="md-nav__link">
    Keyboard events
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scrolling" class="md-nav__link">
    Scrolling
  </a>
  
    <nav class="md-nav" aria-label="Scrolling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prevent-scrolling" class="md-nav__link">
    Prevent scrolling
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#document-and-resource-loading" class="md-nav__link">
    Document and resource loading
  </a>
  
    <nav class="md-nav" aria-label="Document and resource loading">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#page-domcontentloaded-load-beforeunload-unload" class="md-nav__link">
    Page: DOMContentLoaded, load, beforeunload, unload
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_8_5_4" type="checkbox" id="__nav_2_8_5_4" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../Md/">Md</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Md" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_8_5_4">
          <span class="md-nav__icon md-icon"></span>
          Md
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_8_5_5" type="checkbox" id="__nav_2_8_5_5" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../Shell/">Shell</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Shell" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_8_5_5">
          <span class="md-nav__icon md-icon"></span>
          Shell
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_8_6" type="checkbox" id="__nav_2_8_6" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_8_6" tabindex="0" aria-expanded="false">
          Libs & Fwks
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Libs & Fwks" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_8_6">
          <span class="md-nav__icon md-icon"></span>
          Libs & Fwks
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_8_6_1" type="checkbox" id="__nav_2_8_6_1" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../LibsFwks/LibsFwks_Css/">Libs & Fwks for Css</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Libs & Fwks for Css" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_8_6_1">
          <span class="md-nav__icon md-icon"></span>
          Libs & Fwks for Css
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_8_6_2" type="checkbox" id="__nav_2_8_6_2" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../LibsFwks/React/">React</a>
          
        </div>
      
      <nav class="md-nav" aria-label="React" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_8_6_2">
          <span class="md-nav__icon md-icon"></span>
          React
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_8_6_3" type="checkbox" id="__nav_2_8_6_3" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../LibsFwks/Redux/">Redux</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Redux" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_8_6_3">
          <span class="md-nav__icon md-icon"></span>
          Redux
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_8_7" type="checkbox" id="__nav_2_8_7" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_8_7" tabindex="0" aria-expanded="false">
          Runtime
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Runtime" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_8_7">
          <span class="md-nav__icon md-icon"></span>
          Runtime
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_8_7_1" type="checkbox" id="__nav_2_8_7_1" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../Runtime/NodeJs/">NodeJs</a>
          
        </div>
      
      <nav class="md-nav" aria-label="NodeJs" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_8_7_1">
          <span class="md-nav__icon md-icon"></span>
          NodeJs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_8_8" type="checkbox" id="__nav_2_8_8" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_8_8" tabindex="0" aria-expanded="false">
          VCS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="VCS" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_8_8">
          <span class="md-nav__icon md-icon"></span>
          VCS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_8_8_1" type="checkbox" id="__nav_2_8_8_1" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../VCS/Git/">Git</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Git" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_8_8_1">
          <span class="md-nav__icon md-icon"></span>
          Git
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_9" type="checkbox" id="__nav_2_9" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_9" tabindex="0" aria-expanded="false">
          Soft
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Soft" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_9">
          <span class="md-nav__icon md-icon"></span>
          Soft
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_9_1" type="checkbox" id="__nav_2_9_1" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../Soft/PostgreSQL/">PostgreSQL</a>
          
        </div>
      
      <nav class="md-nav" aria-label="PostgreSQL" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_9_1">
          <span class="md-nav__icon md-icon"></span>
          PostgreSQL
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_9_2" type="checkbox" id="__nav_2_9_2" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../Soft/Ranger/">Ranger</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Ranger" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_9_2">
          <span class="md-nav__icon md-icon"></span>
          Ranger
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_9_3" type="checkbox" id="__nav_2_9_3" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../Soft/Rsync/">Rsync</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Rsync" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_9_3">
          <span class="md-nav__icon md-icon"></span>
          Rsync
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_9_4" type="checkbox" id="__nav_2_9_4" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../Soft/Vim/">Vim</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Vim" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_9_4">
          <span class="md-nav__icon md-icon"></span>
          Vim
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_9_5" type="checkbox" id="__nav_2_9_5" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../Soft/Zsh/">Zsh</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Zsh" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_9_5">
          <span class="md-nav__icon md-icon"></span>
          Zsh
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_9_6" type="checkbox" id="__nav_2_9_6" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../Soft/Whatsapp/">Whatsapp</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Whatsapp" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_9_6">
          <span class="md-nav__icon md-icon"></span>
          Whatsapp
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_10" type="checkbox" id="__nav_2_10" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../Linux/">Linux</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Linux" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_10">
          <span class="md-nav__icon md-icon"></span>
          Linux
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_11" type="checkbox" id="__nav_2_11" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../Windows/">Windows</a>
          
            <label for="__nav_2_11">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Windows" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_11">
          <span class="md-nav__icon md-icon"></span>
          Windows
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_11_2" type="checkbox" id="__nav_2_11_2" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../Windows/MsExcel/">MsExcel</a>
          
        </div>
      
      <nav class="md-nav" aria-label="MsExcel" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_11_2">
          <span class="md-nav__icon md-icon"></span>
          MsExcel
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_12" type="checkbox" id="__nav_2_12" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_12" tabindex="0" aria-expanded="false">
          Hardware
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Hardware" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_12">
          <span class="md-nav__icon md-icon"></span>
          Hardware
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_12_1" type="checkbox" id="__nav_2_12_1" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../Hardware/Easy2Boot%28OSes%20Installatiion%29/">Easy2Boot(OSes Installatiion)</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Easy2Boot(OSes Installatiion)" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_12_1">
          <span class="md-nav__icon md-icon"></span>
          Easy2Boot(OSes Installatiion)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#preface-browser-environment-specs" class="md-nav__link">
    Preface: Browser environment, specs
  </a>
  
    <nav class="md-nav" aria-label="Preface: Browser environment, specs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#browser-environment" class="md-nav__link">
    Browser environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specs" class="md-nav__link">
    Specs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dom-essentials" class="md-nav__link">
    DOM Essentials
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dom-tree" class="md-nav__link">
    DOM Tree
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#walking-the-dom" class="md-nav__link">
    Walking the DOM
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#searching-the-dom" class="md-nav__link">
    Searching the DOM
  </a>
  
    <nav class="md-nav" aria-label="Searching the DOM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-getelements" class="md-nav__link">
    Using getElement(s)*
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-queryselector" class="md-nav__link">
    Using querySelector*
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dom-selectors-summary-table" class="md-nav__link">
    DOM selectors summary table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-useful-methods" class="md-nav__link">
    Additional useful methods
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changing-the-dom" class="md-nav__link">
    Changing the DOM
  </a>
  
    <nav class="md-nav" aria-label="Changing the DOM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changing-nodes-content" class="md-nav__link">
    Changing nodes content
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creation-insertion-removal-of-nodes" class="md-nav__link">
    Creation, insertion, removal of nodes
  </a>
  
    <nav class="md-nav" aria-label="Creation, insertion, removal of nodes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creation" class="md-nav__link">
    Creation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#insertion-and-removal" class="md-nav__link">
    Insertion and removal
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#insertion-and-removalold-school-methods" class="md-nav__link">
    Insertion and removal(“old school” methods)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changing-element-properties-class-style" class="md-nav__link">
    Changing element properties: class, style
  </a>
  
    <nav class="md-nav" aria-label="Changing element properties: class, style">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#class" class="md-nav__link">
    class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#style" class="md-nav__link">
    style
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#styles-working-tips" class="md-nav__link">
    styles: working tips
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#html-attributes-vs-dom-properties" class="md-nav__link">
    HTML attributes vs. DOM properties
  </a>
  
    <nav class="md-nav" aria-label="HTML attributes vs. DOM properties">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dom-properties" class="md-nav__link">
    DOM properties
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#html-attributes" class="md-nav__link">
    HTML attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#property-attribute-synchronization" class="md-nav__link">
    Property-attribute synchronization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#non-standard-attributes-use-cases" class="md-nav__link">
    Non-standard attributes use cases
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dataset-dom-property" class="md-nav__link">
    dataset DOM property
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dom-events" class="md-nav__link">
    DOM Events
  </a>
  
    <nav class="md-nav" aria-label="DOM Events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#event-handlers" class="md-nav__link">
    Event handlers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-object" class="md-nav__link">
    Event object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bubbling-and-capturing" class="md-nav__link">
    Bubbling and capturing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-delegation" class="md-nav__link">
    Event delegation
  </a>
  
    <nav class="md-nav" aria-label="Event delegation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#delegation-examples" class="md-nav__link">
    Delegation examples
  </a>
  
    <nav class="md-nav" aria-label="Delegation examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-example-highlight-a-cell-td-on-click" class="md-nav__link">
    basic example: highlight a cell &lt;td&gt; on click
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#actions-in-markup" class="md-nav__link">
    actions in markup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-behavior-pattern" class="md-nav__link">
    The “behavior” pattern
  </a>
  
    <nav class="md-nav" aria-label="The “behavior” pattern">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-counter" class="md-nav__link">
    example: counter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-toggler" class="md-nav__link">
    example: toggler
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#browser-default-actions" class="md-nav__link">
    Browser default actions
  </a>
  
    <nav class="md-nav" aria-label="Browser default actions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#preventing-browser-actions" class="md-nav__link">
    Preventing browser actions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dispatching-custom-eventstodo" class="md-nav__link">
    Dispatching custom events(TODO)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ui-events" class="md-nav__link">
    UI Events
  </a>
  
    <nav class="md-nav" aria-label="UI Events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mouse-events" class="md-nav__link">
    Mouse events
  </a>
  
    <nav class="md-nav" aria-label="Mouse events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mouse-event-properties" class="md-nav__link">
    Mouse event properties
  </a>
  
    <nav class="md-nav" aria-label="Mouse event properties">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mouse-button" class="md-nav__link">
    mouse button
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modifiers-shift-alt-ctrl-and-meta" class="md-nav__link">
    modifiers: shift, alt, ctrl and meta
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coordinates" class="md-nav__link">
    coordinates
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preventing-selection-on-mousedown" class="md-nav__link">
    Preventing selection on mousedown
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#moving-the-mouse" class="md-nav__link">
    Moving the mouse
  </a>
  
    <nav class="md-nav" aria-label="Moving the mouse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mouseoverout" class="md-nav__link">
    mouseover/out
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mouseenterleave" class="md-nav__link">
    mouseenter/leave
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-delegation-example" class="md-nav__link">
    event delegation example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dragndrop-with-mouse-eventstodo" class="md-nav__link">
    Drag'n'Drop with mouse events(TODO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pointer-eventstodo" class="md-nav__link">
    Pointer events(TODO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keyboard-events" class="md-nav__link">
    Keyboard events
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scrolling" class="md-nav__link">
    Scrolling
  </a>
  
    <nav class="md-nav" aria-label="Scrolling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prevent-scrolling" class="md-nav__link">
    Prevent scrolling
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#document-and-resource-loading" class="md-nav__link">
    Document and resource loading
  </a>
  
    <nav class="md-nav" aria-label="Document and resource loading">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#page-domcontentloaded-load-beforeunload-unload" class="md-nav__link">
    Page: DOMContentLoaded, load, beforeunload, unload
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  



<h1 id="document-object-model">Document Object Model</h1>
<h2 id="preface-browser-environment-specs">Preface: Browser environment, specs</h2>
<p>Read more from <a href="https://javascript.info/browser-environment" target="_blank">source</a>.</p>
<p>The JavaScript language was initially created for web browsers. Since then, it has evolved into a language with many uses and platforms.</p>
<p>A platform may be a browser, or a web-server or another <em>host</em>, or even a “smart” coffee machine if it can run JavaScript. Each of these provides platform-specific functionality. The JavaScript specification calls that a <em>host environment</em>.</p>
<p>A host environment provides its own objects and functions in addition to the language core. Web browsers give a means to control web pages. Node.js provides server-side features, and so on.</p>
<h3 id="browser-environment">Browser environment</h3>
<p>Here’s a bird’s-eye view of what we have when JavaScript runs in a web browser:</p>
<ul>
<li><strong>window:</strong><ol>
<li><strong>DOM:</strong> document, ...</li>
<li><strong>BOM:</strong> navigator, screen, location, frames, history, XMLHttpRequest</li>
<li><strong>JavaScript:</strong> Object, Array, Function, ...</li>
</ol>
</li>
</ul>
<p>There’s a “root” object called <em>window</em>. It has two roles:</p>
<ol>
<li>First, it is a global object for JavaScript code.</li>
<li>Second, it represents the “browser window” and provides methods to control it.</li>
</ol>
<h3 id="specs">Specs</h3>
<ul>
<li><a href="https://dom.spec.whatwg.org" target="_blank">DOM specification</a> - Describes the document structure, manipulations, and events.</li>
<li><a href="https://www.w3.org/TR/cssom-1/" target="_blank">CSSOM specification</a> - Describes stylesheets and style rules, manipulations with them, and their binding to documents.</br>
  The CSSOM is used together with the DOM when we modify style rules for the document. In practice though, the CSSOM is rarely required, because we rarely need to modify CSS rules from JavaScript (usually we just add/remove CSS classes, not modify their CSS rules), but that’s also possible.</li>
<li><a href="https://html.spec.whatwg.org" target="_blank">HTML specification</a> - Describes the HTML language (e.g. tags) and also the BOM (browser object model) – various browser functions: <code>setTimeout</code>, <code>alert</code>, <code>location</code> and so on. It takes the DOM specification and extends it with many additional properties and methods.</li>
<li>Additionally, some classes are described separately at <a href="https://spec.whatwg.org/" target="_blank">https://spec.whatwg.org/</a>.</li>
</ul>
<h2 id="dom-essentials">DOM Essentials</h2>
<div class="admonition info">
<ul>
<li><a href="https://www.w3schools.com/js/js_htmldom.asp" target="_blank">W3S Course</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/Events" target="_blank">MDN: DOM Events</a></li>
<li><a href="https://javascript.info/document" target="_blank">Document(JAVASCRIPT.INFO)</a></li>
<li><a href="https://javascript.info/event-delegation#hide-messages-with-delegation" target="_blank">Event Delegation(JAVASCRIPT.INFO)</a></li>
<li><a href="https://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes" target="_blank">Javascript Char Codes (Key Codes)</a></li>
</ul>
</div>
<p>Document Object Model, or DOM for short, represents all <ins>page content</ins> as objects that can be modified.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>DOM is not only for browsers</strong></br>
For instance, server-side scripts that download HTML pages and process them can also use the DOM. They may support only a part of the specification though.</p>
</div>
<h2 id="dom-tree">DOM Tree</h2>
<p>There are <a href="https://dom.spec.whatwg.org/#node" target="_blank">12 node types</a>. In practice we usually work with 4 of them:</p>
<ol>
<li><code>document</code> object - the main “entry point” to the page(= into DOM), represents the whole document.</li>
<li><em>element</em> nodes – HTML-tags, the tree building blocks.</li>
<li><em>text</em> nodes – contain text(<em>spaces</em> and <em>newlines</em> too!).</li>
<li><em>comment</em> nodes – sometimes we can put information there, it won’t be shown, but JS can read it from the DOM.</li>
</ol>
<p><strong><em>node</em>.nodeType</strong> - “old-fashioned” way to get the “type” of a DOM node, read only:</p>
<ul>
<li><code class="highlight"><span class="nx">node</span><span class="p">.</span><span class="nx">nodeType</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">9</span></code> for the 'document' object</li>
<li><code class="highlight"><span class="nx">node</span><span class="p">.</span><span class="nx">nodeType</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">8</span></code> for comment nodes</li>
<li><code class="highlight"><span class="nx">node</span><span class="p">.</span><span class="nx">nodeType</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">3</span></code> for text nodes</li>
<li><code class="highlight"><span class="nx">node</span><span class="p">.</span><span class="nx">nodeType</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">1</span></code> for element nodes</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span><span class="cm">&lt;!-- this is a comment --&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">elem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// let&#39;s examine: what type of node is in elem?</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span><span class="p">);</span><span class="w"> </span><span class="c1">// 1 =&gt; element</span>

<span class="w">    </span><span class="c1">// its first child is...</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">nodeType</span><span class="p">);</span><span class="w"> </span><span class="c1">// 8 =&gt; comment</span>

<span class="w">    </span><span class="c1">// and its second child is...</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">[</span><span class="mf">1</span><span class="p">].</span><span class="nx">nodeType</span><span class="p">)</span><span class="w"> </span><span class="c1">// 3 =&gt; text(newline)</span>

<span class="w">    </span><span class="c1">// for the document object, the type is 9</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">nodeType</span><span class="p">);</span><span class="w"> </span><span class="c1">// 9</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</code></pre></div>
<p>In modern scripts, we can use <code class="highlight"><span class="ow">instanceof</span></code> and other class-based tests to see the node type.</p>
<p><strong><em>node</em>.nodeName</strong> - returns:</p>
<ul>
<li>for <em>element</em> nodes: <code class="highlight"><span class="p">&lt;</span><span class="nt">tag</span><span class="p">&gt;</span></code> name(same as <code class="highlight"><span class="nx">element</span><span class="p">.</span><span class="nx">tagName</span></code> property <a href="#additional-useful-methods"><mark>do</mark></a>)</li>
<li>for other node types (<em>text</em>, <em>comment</em>, etc.): string with the node type</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span><span class="cm">&lt;!-- comment --&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">    </span><span class="c1">// for &lt;body&gt; element</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">);</span><span class="w"> </span><span class="c1">// BODY</span>

<span class="w">    </span><span class="c1">// for comment</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">);</span><span class="w"> </span><span class="c1">// #comment</span>

<span class="w">    </span><span class="c1">// for document</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">);</span><span class="w"> </span><span class="c1">// #document</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</code></pre></div>
<h2 id="walking-the-dom">Walking the DOM</h2>
<ul>
<li>
<p>The topmost tree nodes are available directly as <code>document</code> properties:</p>
<ul>
<li><code class="highlight"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>...<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></code> = <code class="highlight"><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span></code></li>
<li><code class="highlight"><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>...<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span></code> = <code class="highlight"><span class="nb">document</span><span class="p">.</span><span class="nx">head</span></code></li>
<li><code class="highlight"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>...<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span></code> = <code class="highlight"><span class="nb">document</span><span class="p">.</span><span class="nx">body</span></code></li>
</ul>
</li>
<li>
<p>Given an any DOM node, we can go to its immediate neighbors using <em>navigation properties</em>.</p>
<p>There are two main sets of them:</p>
<ul>
<li>For all nodes: <code class="highlight"><span class="nx">parentNode</span></code>, <code class="highlight"><span class="nx">childNodes</span></code>, <code class="highlight"><span class="nx">firstChild</span></code>(=== <code class="highlight"><span class="nx">childNodes</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span></code>), <code class="highlight"><span class="nx">lastChild</span></code>(=== <code class="highlight"><span class="nx">childNodes</span><span class="p">[</span><span class="nx">elem</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">]</span></code>), <code class="highlight"><span class="nx">previousSibling</span></code>, <code class="highlight"><span class="nx">nextSibling</span></code>.</li>
<li>
<p>For <em>element</em> nodes only: <code class="highlight"><span class="nx">parentElement</span></code>, <code class="highlight"><span class="nx">children</span></code>, <code class="highlight"><span class="nx">firstElementChild</span></code>, <code class="highlight"><span class="nx">lastElementChild</span></code>, <code class="highlight"><span class="nx">previousElementSibling</span></code>, <code class="highlight"><span class="nx">nextElementSibling</span></code>.</p>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">.(</span><span class="s2">&quot;li&quot;</span><span class="p">)[</span><span class="mf">1</span><span class="p">].</span><span class="nx">parentElement</span><span class="p">;</span><span class="w"> </span><span class="c1">//e.g. get &#39;ul&#39; element</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">.(</span><span class="s2">&quot;li&quot;</span><span class="p">)[</span><span class="mf">1</span><span class="p">].</span><span class="nx">parentElement</span><span class="p">.</span><span class="nx">parentElement</span><span class="p">;</span><span class="w"> </span><span class="c1">//e.g. gets &#39;body&#39; element</span>

<span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">.(</span><span class="s2">&quot;li&quot;</span><span class="p">)[</span><span class="mf">1</span><span class="p">].</span><span class="nx">parentElement</span><span class="p">.</span><span class="nx">children</span><span class="p">;</span><span class="w"> </span><span class="c1">//e.g. get all the children elements of the &#39;body&#39;</span>
</code></pre></div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">DOM Collections</p>
<p><code class="highlight"><span class="nx">childNodes</span></code> and <code class="highlight"><span class="nx">children</span></code> are <em>collections</em>.</br>
<em>Collection</em> – a special array-like <ins>iterable</ins> object and has two important consequences:</p>
<ul>
<li>
<p>we can use <code class="highlight"><span class="k">for</span><span class="p">..</span><span class="k">of</span></code> to iterate over it:</p>
<div class="highlight"><pre><span></span><code><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">node</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span><span class="w"> </span><span class="c1">// shows all nodes from the collection</span>
<span class="p">}</span>
</code></pre></div>
<p>That’s because it’s iterable (provides the <code class="highlight"><span class="nb">Symbol</span><span class="p">.</span><span class="nx">iterator</span></code> property, as required).</p>
<div class="admonition warning">
<p class="admonition-title">Don’t use <code class="highlight"><span class="k">for</span><span class="p">..</span><span class="ow">in</span></code> to loop over collections</p>
<p>The <code class="highlight"><span class="k">for</span><span class="p">..</span><span class="ow">in</span></code> loop iterates over all <ins>enumerable</ins> properties. And collections have some “extra” rarely used properties that we usually do not want to get:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="c1">// shows 0, 1, length, item, values and more.</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">prop</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">)</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="nx">prop</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</code></pre></div>
</div>
</li>
<li>
<p>array methods won’t work, because it’s not an array:</p>
<div class="highlight"><pre><span></span><code><span class="nx">alert</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">filter</span><span class="p">);</span><span class="w"> </span><span class="c1">// undefined (there&#39;s no filter method!)</span>
</code></pre></div>
<p>BUT: We can create a “real” array from the collection, if we want array methods, i.e. to make a copy using <code class="highlight"><span class="nb">Array</span><span class="p">.</span><span class="kr">from</span></code> to iterate over if adding, moving, or removing nodes.</p>
<div class="highlight"><pre><span></span><code><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nb">Array</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">).</span><span class="nx">filter</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// function</span>
</code></pre></div>
</li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">DOM collections are live</p>
<p>Almost all DOM collections with minor exceptions are <strong>live</strong>, i.e. they reflect the <ins>current state of DOM</ins>.</br>
If we keep a reference to <code class="highlight"><span class="nx">element</span><span class="p">.</span><span class="nx">childNodes</span></code>, and add/remove nodes into DOM, then they appear in the collection automatically.</p>
</div>
<div class="admonition note">
<p class="admonition-title">DOM collections and navigation properties are read-only</p>
<p>We can’t replace a child by something else by assigning <code class="highlight"><span class="nx">childNodes</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...</span></code>. Changing DOM needs other methods, <a href="#changing-the-dom"><mark>see below</mark></a>.</p>
</div>
</li>
<li>
<p>Some types of DOM elements, provide additional <em>navigation properties</em> and <em>collections</em> to access their content, e.g.:</p>
<ol>
<li>
<p><code class="highlight"><span class="p">&lt;</span><span class="nt">table</span><span class="p">&gt;</span>...<span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span></code></p>
<ul>
<li><code class="highlight"><span class="nx">table</span><span class="p">.</span><span class="nx">rows</span></code> – the collection of <code class="highlight"><span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span></code> elements of the table.</li>
<li><code class="highlight"><span class="nx">table</span><span class="p">.</span><span class="nx">caption</span><span class="o">/</span><span class="nx">tHead</span><span class="o">/</span><span class="nx">tFoot</span></code> – references to elements <code class="highlight"><span class="p">&lt;</span><span class="nt">caption</span><span class="p">&gt;</span></code>, <code class="highlight"><span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span></code>, <code class="highlight"><span class="p">&lt;</span><span class="nt">tfoot</span><span class="p">&gt;</span></code>.</li>
<li><code class="highlight"><span class="nx">table</span><span class="p">.</span><span class="nx">tBodies</span></code> – the collection of <code class="highlight"><span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span></code> elements (can be many according to the standard, but there will always be at least one – even if it is not in the source HTML, the browser will put it in the DOM).</li>
</ul>
<p><code class="highlight"><span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span></code>, <code class="highlight"><span class="p">&lt;</span><span class="nt">tfoot</span><span class="p">&gt;</span></code>, <code class="highlight"><span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span></code> elements provide the rows property:</p>
<ul>
<li><code class="highlight"><span class="nx">tbody</span><span class="p">.</span><span class="nx">rows</span></code> – the collection of <code class="highlight"><span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span></code> inside.</li>
</ul>
<p><code class="highlight"><span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span></code> :</p>
<ul>
<li><code class="highlight"><span class="nx">tr</span><span class="p">.</span><span class="nx">cells</span></code> – the collection of <code class="highlight"><span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span></code> and <code class="highlight"><span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span></code> cells inside the given <code class="highlight"><span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span></code>.</li>
<li><code class="highlight"><span class="nx">tr</span><span class="p">.</span><span class="nx">sectionRowIndex</span></code> – the position (index) of the given <code class="highlight"><span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span></code> inside the enclosing <code class="highlight"><span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>/<span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>/<span class="p">&lt;</span><span class="nt">tfoot</span><span class="p">&gt;</span></code>.</li>
<li><code class="highlight"><span class="nx">tr</span><span class="p">.</span><span class="nx">rowIndex</span></code> – the number of the <code class="highlight"><span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span></code> in the table as a whole (including all table rows).</li>
</ul>
<p><code class="highlight"><span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span></code> and <code class="highlight"><span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span></code> :</p>
<ul>
<li><code class="highlight"><span class="nx">td</span><span class="p">.</span><span class="nx">cellIndex</span></code> – the number of the cell inside the enclosing <code class="highlight"><span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span></code>.</li>
</ul>
<p>An example of usage:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">table</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;table&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>one<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>two<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>three<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>four<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="c1">// get td with &quot;two&quot; (first row, second column)</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">td</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">rows</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">cells</span><span class="p">[</span><span class="mf">1</span><span class="p">];</span>
<span class="w">  </span><span class="nx">td</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;red&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// highlight it</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
</li>
<li>
<p><code class="highlight"><span class="p">&lt;</span><span class="nt">form</span><span class="p">&gt;</span>...<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span></code></p>
</li>
</ol>
</li>
</ul>
<h2 id="searching-the-dom">Searching the DOM</h2>
<h3 id="using-getelements">Using <code>getElement(s)*</code></h3>
<div class="admonition note">
<p class="admonition-title">This methods used for older code bases.</p>
</div>
<ul>
<li>
<p><strong><em>document</em>.getElementById</strong></p>
<div class="highlight"><pre><span></span><code><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;first&quot;</span><span class="p">);</span>
</code></pre></div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">All methods <code>getElementsBy*</code> below return a <em>live collection</em>.</p>
<p>Such collections always reflect the current state of the document and “auto-update” when it changes.</p>
</div>
<ul>
<li>
<p><strong><em>element</em>.getElementsByTagName</strong></p>
<p>looks for elements with the given tag and returns the <em>live collection</em> of them</br>
the tag parameter can also be a star <code>"*"</code> for “any tags”</p>
<div class="highlight"><pre><span></span><code><span class="c1">// outputs live collection of all h1 elements:</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;h1&quot;</span><span class="p">);</span>
<span class="c1">// outputs specific element:</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;h1&quot;</span><span class="p">)[</span><span class="mf">0</span><span class="p">];</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- Let’s find all input tags inside the table: --&gt;</span>
<span class="p">&lt;</span><span class="nt">table</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;table&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Your age:<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;age&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;young&quot;</span> <span class="na">checked</span><span class="p">&gt;</span> less than 18
      <span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;age&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;mature&quot;</span><span class="p">&gt;</span> from 18 to 50
      <span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;age&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;senior&quot;</span><span class="p">&gt;</span> more than 60
      <span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">inputs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">);</span>

<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">input</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">inputs</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nx">input</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;: &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">input</span><span class="p">.</span><span class="nx">checked</span><span class="w"> </span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
</li>
<li>
<p><strong><em>element</em>.getElementsByClassName</strong></p>
<p>looks for elements with the given class and returns the <em>live collection</em> of them</p>
<div class="highlight"><pre><span></span><code><span class="c1">// outputs live collection of all elements with class &#39;second&#39;:</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="s2">&quot;second&quot;</span><span class="p">);</span>
<span class="c1">// outputs specific element:</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="s2">&quot;second&quot;</span><span class="p">)[</span><span class="mf">0</span><span class="p">];</span>
</code></pre></div>
</li>
<li>
<p><strong><em>document</em>.getElementsByName</strong></p>
<p>looks for elements with the given name and returns the <em>live collection</em> of them</p>
</li>
</ul>
<h3 id="using-queryselector">Using <code>querySelector*</code></h3>
<div class="admonition note">
<p class="admonition-title">This methods can select anything inside quotes exactly like selecting in CSS. They are more powerfull than the first three above.</p>
</div>
<ul>
<li>
<p><strong><em>element</em>.querySelectorAll</strong></p>
<p>returns <em>all</em> elements in the document that matches a specified <a href="https://www.w3schools.com/cssref/css_selectors.asp" target="_blank">CSS selector(s)</a>, as a <em>static NodeList object(static collection)</em>, i.e. it doesn't reflect the current state of the document and doesn't “auto-update” when it changes</br>
can be iterated with <code class="highlight"><span class="k">for</span><span class="p">...</span><span class="k">of</span></code> loop or with <code class="highlight"><span class="nx">forEach</span></code> array method</p>
<div class="admonition note">
<p class="admonition-title">Can use pseudo-classes as well</p>
<p>Pseudo-classes in the CSS selector like <code class="highlight"><span class="p">:</span><span class="nd">hover</span></code> and <code class="highlight"><span class="p">:</span><span class="nd">active</span></code> are also supported. For instance, <code class="highlight"><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;:hover&#39;</span><span class="p">)</span></code> will return the collection with elements that the pointer is over now (in nesting order: from the outermost <code class="highlight"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span></code> to the most nested one).</p>
</div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- Here we look for all &lt;li&gt; elements that are last children: --&gt;</span>
<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>The<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>test<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>has<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>passed<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">elements</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;ul &gt; li:last-child&#39;</span><span class="p">);</span>

<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">elem</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">elements</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">innerHTML</span><span class="p">);</span><span class="w"> </span><span class="c1">// &quot;test&quot;, &quot;passed&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title"><em>element</em>.querySelectorAll “unexpected“ result</p>
<p>By default this method checks the last element without considering the context, e.g.:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;list&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;item-list&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;sub-list&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;item-sub-list&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;item-sub-list&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">sublist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;.sub-list&#39;</span><span class="p">)</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">sublistitems</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">sublist</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;.list .item-sub-list&#39;</span><span class="p">)</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sublistitems</span><span class="p">)</span><span class="w">  </span><span class="c1">// NodeList(2) [li.item-sub-list, li.item-sub-list]</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="cm">&lt;!-- we expect here to get nothing, but instead we&#39;ve got collection of 2 nodes --&gt;</span>
</code></pre></div>
</div>
</li>
<li>
<p><strong><em>element</em>.querySelector</strong></p>
<p>returns the <em>first</em> element that matches a specified <a href="https://www.w3schools.com/cssref/css_selectors.asp" target="_blank">CSS selector(s)</a> in the document, i.e. the result(only!) is the same as <code class="highlight"><span class="nx">element</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="nx">css</span><span class="p">)[</span><span class="mf">0</span><span class="p">]</span></code>, but the latter is <ins>looking for all</ins> elements and picking one, while <code class="highlight"><span class="nx">element</span><span class="p">.</span><span class="nx">querySelector</span></code> just <ins>looks for one</ins>, so it’s faster and also shorter to write</p>
<div class="highlight"><pre><span></span><code><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;li&quot;</span><span class="p">);</span>
</code></pre></div>
</li>
</ul>
<h3 id="dom-selectors-summary-table">DOM selectors summary table</h3>
<table>
<thead>
<tr>
<th>Method</th>
<th>Searches by...</th>
<th>Retruns</th>
<th>Can call on an element?</th>
<th>Live collection?</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>querySelector</code></td>
<td>CSS-selector</td>
<td>One obect</td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg></span></td>
</tr>
<tr>
<td><code>querySelectorAll</code></td>
<td>CSS-selector</td>
<td>Collection of objects</td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg></span></td>
</tr>
<tr>
<td><code>getElementById</code></td>
<td><code>id</code></td>
<td>One obect</td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg></span> - Searches the whole document by calling on <code>document</code> object</td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg></span></td>
</tr>
<tr>
<td><code>getElementsByName</code></td>
<td><code>name</code></td>
<td>Collection of objects</td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg></span> - Searches the whole document by calling on <code>document</code> object</td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
</tr>
<tr>
<td><code>getElementsByTagName</code></td>
<td>tag or <code>'*'</code></td>
<td>Collection of objects</td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
</tr>
<tr>
<td><code>getElementsByClassName</code></td>
<td>class</td>
<td>Collection of objects</td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">It is important to CACHE selectors in variables.</p>
<p>This is in order to reduce memory usage by js engine(by going to DOM each time when we use selector), e.g: <code class="highlight"><span class="kd">var</span><span class="w"> </span><span class="nx">h1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;h1&quot;</span><span class="p">);</span></code></p>
</div>
<h3 id="additional-useful-methods">Additional useful methods</h3>
<ul>
<li>
<p><strong><em>element</em>.matches(css)</strong></p>
<p>checks if <em>element</em> matches the given CSS-selector and returns <code>true</code> or <code>false</code></p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;http://example.com/file.zip&quot;</span><span class="p">&gt;</span>...<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;http://ya.ru&quot;</span><span class="p">&gt;</span>...<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="c1">// can be any collection instead of document.body.children</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">elem</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">children</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">matches</span><span class="p">(</span><span class="s1">&#39;a[href$=&quot;zip&quot;]&#39;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;The archive reference: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">elem</span><span class="p">.</span><span class="nx">href</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
</li>
<li>
<p><strong><em>element</em>.closest(css)</strong></p>
<p>looks for the nearest ancestor that matches the CSS-selector; returns <code>null</code> if finds nothing; the <em>element</em> itself is also included in the search</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Contents<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;contents&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;book&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;chapter&quot;</span><span class="p">&gt;</span>Chapter 1<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;chapter&quot;</span><span class="p">&gt;</span>Chapter 2<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">chapter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.chapter&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// LI</span>

<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="nx">chapter</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="s1">&#39;.book&#39;</span><span class="p">));</span><span class="w"> </span><span class="c1">// UL</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="nx">chapter</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="s1">&#39;.contents&#39;</span><span class="p">));</span><span class="w"> </span><span class="c1">// DIV</span>

<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="nx">chapter</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="s1">&#39;h1&#39;</span><span class="p">));</span><span class="w"> </span><span class="c1">// null (because h1 is not an ancestor)</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
</li>
<li>
<p><strong><em>elemA</em>.contains(<em>elemB</em>)</strong></p>
<p>checks for the child-parent relationship; returns true if <code>elemB</code> is inside <code>elemA</code> (a descendant of <code>elemA</code>) or when <code>elemA==elemB</code></p>
</li>
<li>
<p><strong><em>element</em>.tagName</strong></p>
<p>returns <code class="highlight"><span class="p">&lt;</span><span class="nt">tag</span><span class="p">&gt;</span></code> name</p>
<p><code class="highlight"><span class="nx">tagName</span></code> is only supported by <em>element</em> nodes (as it originates from <code>Element</code> class)</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span><span class="cm">&lt;!-- comment --&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">    </span><span class="c1">// for &lt;body&gt; element</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">tagName</span><span class="p">);</span><span class="w"> </span><span class="c1">// BODY</span>

<span class="w">    </span><span class="c1">// for comment</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">tagName</span><span class="p">);</span><span class="w"> </span><span class="c1">// undefined (not an element node)</span>

<span class="w">    </span><span class="c1">// for document</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">tagName</span><span class="p">);</span><span class="w"> </span><span class="c1">// undefined (not an element node)</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">The tag name is always uppercase except in XML mode.</p>
<p>The browser has two modes of processing documents: HTML and XML. Usually the HTML-mode is used for webpages. XML-mode is enabled when the browser receives an XML-document with the header: <code>Content-Type: application/xml+xhtml</code>.</p>
<p>In HTML mode <code class="highlight"><span class="nx">tagName</span></code>(and <code class="highlight"><span class="nx">nodeName</span></code>) is always uppercased: it’s <code>BODY</code> either for <code class="highlight"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span></code> or <code class="highlight"><span class="p">&lt;</span><span class="nt">BoDy</span><span class="p">&gt;</span></code>.</p>
</div>
</li>
</ul>
<h2 id="changing-the-dom">Changing the DOM</h2>
<h3 id="changing-nodes-content">Changing nodes content</h3>
<ul>
<li>
<p><strong><em>element</em>.innerHTML</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// returns the HTML content(inner HTML) of an element as a string</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;h1&quot;</span><span class="p">).</span><span class="nx">innerHTML</span><span class="p">;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">// sets the HTML content(inner HTML) of an element</span>
<span class="c1">// DANGEROUS - it removes everything within the element(also other elements)</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;h1&quot;</span><span class="p">).</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&lt;strong&gt;!!!!!!&lt;/strong&gt;&quot;</span><span class="p">;</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title"><code class="highlight"><span class="nx">element</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;...&quot;</span><span class="p">;</span></code> typing errors automatically fixed by browser</p>
<p>For example when we forgot to close the tag.</p>
</div>
<div class="admonition note">
<p class="admonition-title"><code class="highlight"><span class="nx">element</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;...&quot;</span><span class="p">;</span></code> don’t execute scripts</p>
<p>When inserting a <code class="highlight"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span></code> tag into the document – it becomes a part of HTML, but doesn’t execute.</p>
</div>
<div class="highlight"><pre><span></span><code><span class="c1">//appends HTML to an element</span>
<span class="nx">elem</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s2">&quot;...&quot;</span><span class="p">;</span>
<span class="c1">// is a shorter way to write:</span>
<span class="nx">elem</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">elem</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;...&quot;</span>
<span class="c1">// In other words, &#39;innerHTML+=&#39; does this:</span>
<span class="c1">// 1. The old contents is removed.</span>
<span class="c1">// 2. The new &#39;innerHTML&#39; is written instead (a concatenation of the old and the new one).</span>
<span class="c1">// DANGEROUS - becsause the old content is “zeroed-out” causing following side effects:</span>
<span class="c1">// - all images and other resources will be reloaded</span>
<span class="c1">// - if the existing text was selected with the mouse, then most browsers will remove the selection upon rewriting &#39;innerHTML&#39;</span>
<span class="c1">// - if there was an &lt;input&gt; with a text entered by the visitor, then the text will be removed</span>
<span class="c1">// - and so on ...</span>
</code></pre></div>
</li>
<li>
<p><strong><em>element</em>.outerHTML</strong></p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- returns the full HTML of the element as a string, like &#39;innerHTML&#39; plus the element itself --&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;elem&quot;</span><span class="p">&gt;</span>Hello <span class="p">&lt;</span><span class="nt">b</span><span class="p">&gt;</span>World<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">outerHTML</span><span class="p">);</span><span class="w"> </span><span class="c1">// &lt;div id=&quot;elem&quot;&gt;Hello &lt;b&gt;World&lt;/b&gt;&lt;/div&gt;</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- seting the full HTML of the element --&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>Hello, world!<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">elem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// replace elem.outerHTML with &lt;p&gt;...&lt;/p&gt;</span>
<span class="w">  </span><span class="nx">elem</span><span class="p">.</span><span class="nx">outerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&lt;p&gt;A new element&lt;/p&gt;&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// (*)</span>

<span class="w">  </span><span class="c1">// Wow! &#39;elem&#39; is still the same!</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">outerHTML</span><span class="p">);</span><span class="w"> </span><span class="c1">// &lt;div&gt;Hello, world!&lt;/div&gt; (**)</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Regarding the codeblock above:</br>Unlike <code class="highlight"><span class="nx">innerHTML</span></code>, writing to <code class="highlight"><span class="nx">outerHTML</span></code> does not change the element. Instead, it replaces it in the DOM.</p>
<p>In the line <code>(*)</code> we replaced <code class="highlight"><span class="nx">elem</span></code> with <code class="highlight"><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>A new element<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></code>. In the <ins>outer document</ins> (the DOM and therefore the page content) we can see the new content instead of the <code class="highlight"><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>Hello, world!<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></code>. But, as we can see in line <code>(**)</code>, the value of the old <code class="highlight"><span class="nx">elem</span></code> variable hasn’t changed!</p>
<p>The <code class="highlight"><span class="nx">outerHTML</span></code> <em>assignment</em> <strong>does not modify</strong> the <ins>DOM element</ins> (<ins>the object</ins> referenced by, in this case, the variable <code class="highlight"><span class="nx">elem</span></code>), but removes <ins>it</ins> from the DOM and inserts the new HTML in <ins>its</ins> place.</p>
<p>So what happened in <code class="highlight"><span class="nx">elem</span><span class="p">.</span><span class="nx">outerHTML</span><span class="o">=</span><span class="p">...</span></code> is:</p>
<ul>
<li><code class="highlight"><span class="nx">elem</span></code> was removed from the document</li>
<li>another piece of HTML <code class="highlight"><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>A new element<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></code> was inserted in its place</li>
<li><code class="highlight"><span class="nx">elem</span></code> still has its old value and the new HTML(<code class="highlight"><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>A new element<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></code>) wasn’t saved to any variable</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It’s so easy to make an error here: modify <code class="highlight"><span class="nx">elem</span><span class="p">.</span><span class="nx">outerHTML</span></code> and then continue to work with <code class="highlight"><span class="nx">elem</span></code> as if it had the new content in it. But it doesn’t. <code class="highlight"><span class="nx">elem</span><span class="p">.</span><span class="nx">outerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;...&#39;</span></code> puts the <ins>new HTML</ins> in its place instead. We can get references to the <ins>new elements</ins> by querying the DOM.</p>
</div>
</div>
</li>
<li>
<p><strong><em>textNode/commentNode</em>.data</strong>, <strong><em>textNode/commentNode</em>.nodeValue</strong></p>
<div class="admonition note">
<p class="admonition-title"><code class="highlight"><span class="nx">data</span></code> and <code class="highlight"><span class="nx">nodeValue</span></code> properties are almost the same for practical use.</p>
<p>There are only minor specification differences. So we’ll use <code class="highlight"><span class="nx">data</span></code>, because it’s shorter.</p>
</div>
<p>returns/modifies the content of a non-element node(text, comment):</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  Hello
  <span class="cm">&lt;!-- Comment --&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span><span class="w"> </span><span class="c1">// Hello</span>

<span class="w">    </span><span class="nx">text</span><span class="p">.</span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Hello World!&#39;</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span><span class="w"> </span><span class="c1">// Hello World!</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">comment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">text</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">;</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">comment</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span><span class="w"> </span><span class="c1">// Comment</span>

<span class="w">    </span><span class="nx">comment</span><span class="p">.</span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;New Comment&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">comment</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span><span class="w"> </span><span class="c1">// New Comment</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Practical usgae of <strong><em>commentNode</em>.data</strong></p>
<p>Sometimes developers embed information or template instructions into HTML in them, like this:</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- if isAdmin --&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>Welcome, Admin!<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="cm">&lt;!-- /if --&gt;</span>
</code></pre></div>
<p>…Then JavaScript can read it from <code class="highlight"><span class="nx">data</span></code> property and process embedded instructions.</p>
</div>
</li>
<li>
<p><strong><em>element</em>.textContent</strong></p>
<p>provides access to the text inside the element: only text, minus all <code>&lt;tags&gt;</code></p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- returning text content --&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;news&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Headline!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Martians attack people!<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">news</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#news&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="c1">// Headline! Martians attack people!</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="nx">news</span><span class="p">.</span><span class="nx">textContent</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- modifying/writing to text content --&gt;</span>

<span class="cm">&lt;!-- this div gets the name “as HTML”: all tags become tags, so we see the bold name --&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;elem1&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="cm">&lt;!-- this div gets the name “as text”, so we literally see &lt;b&gt;Winnie-the-Pooh!&lt;/b&gt; --&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;elem2&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prompt</span><span class="p">(</span><span class="s2">&quot;What&#39;s your name?&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&lt;b&gt;Winnie-the-Pooh!&lt;/b&gt;&quot;</span><span class="p">);</span>

<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">elem1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#elem1&#39;</span><span class="p">)</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">elem2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#elem2&#39;</span><span class="p">)</span>
<span class="w">  </span><span class="nx">elem1</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">name</span><span class="p">;</span>
<span class="w">  </span><span class="nx">elem2</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">name</span><span class="p">;</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Getting an input from a user.</p>
<p>In most cases, we expect the text from a user, and want to treat it as text. We don’t want unexpected HTML in our site. An assignment to <code class="highlight"><span class="nx">textContent</span></code> does exactly that.</p>
</div>
</li>
<li>
<p><strong><em>element</em>.hidden, <code>&lt;tag hidden&gt;...&lt;/tag&gt;</code></strong></p>
<p>The “hidden” attribute and the DOM property specifies whether the element is visible or not.</br>
Technically, hidden works the same as <code class="highlight"><span class="nt">style</span><span class="o">=</span><span class="s2">&quot;display:none&quot;</span></code>. But it’s shorter to write.</p>
<p>Example of blinking element:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;elem&quot;</span><span class="p">&gt;</span>A blinking element<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">elem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#elem&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="nx">setInterval</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">elem</span><span class="p">.</span><span class="nx">hidden</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">hidden</span><span class="p">,</span><span class="w"> </span><span class="mf">1000</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
</li>
</ul>
<h3 id="creation-insertion-removal-of-nodes">Creation, insertion, removal of nodes</h3>
<h4 id="creation">Creation</h4>
<ul>
<li><strong><em>document</em>.createElement('tag')</strong> – creates an element with the given tag</li>
<li><strong><em>document</em>.createTextNode('string value')</strong> – creates a text node(rarely used)</li>
<li><strong><em>element</em>.cloneNode(<em>deep</em>)</strong> – clones the element without descendants when <code>deep==''</code>, if <code>deep==true</code> then with all descendants</li>
</ul>
<h4 id="insertion-and-removal">Insertion and removal</h4>
<ul>
<li><strong><em>node</em>.append(<em>...nodes or 'strings'</em>)</strong> - insert into node, at the end</li>
<li><strong><em>node</em>.prepend(<em>...nodes or 'strings'</em>)</strong> - insert into node, at the beginning</li>
<li><strong><em>node</em>.before(<em>...nodes or 'strings'</em>)</strong> - insert right before node</li>
<li><strong><em>node</em>.after(<em>...nodes or 'strings'</em>)</strong> - insert right after node</li>
<li><strong><em>node</em>.replaceWith(<em>...nodes or 'strings'</em>)</strong> - replace node</li>
<li><strong><em>node</em>.remove()</strong> - remove the node</li>
</ul>
<div class="admonition note">
<p class="admonition-title">The above insertion methods can only be used to insert DOM nodes or text pieces.</p>
<p>To insert an HTML string “as html”, with all tags and stuff working, in the same manner as <code class="highlight"><span class="nx">element</span><span class="p">.</span><span class="nx">innerHTML</span></code> does it use following method:</p>
</div>
<ul>
<li>
<p>Given some HTML in <code>html</code>, <strong><em>element</em>.insertAdjacentHTML("where", html)</strong> inserts it depending on the value of <code>"where"</code>:</p>
<ul>
<li><strong>"beforebegin"</strong> – insert html right before elem</li>
<li><strong>"afterbegin"</strong> – insert html into elem, at the beginning</li>
<li><strong>"beforeend"</strong> – insert html into elem, at the end</li>
<li><strong>"afterend"</strong> – insert html right after elem</li>
</ul>
<p>Also there are similar methods, <strong><em>element</em>.insertAdjacentText("where", 'text')</strong> and <strong><em>element</em>.insertAdjacentElement("where", element)</strong>, that insert text strings and elements, but they are rarely used because there are mentioned above <code class="highlight"><span class="nx">append</span></code>, <code class="highlight"><span class="nx">prepend</span></code>, <code class="highlight"><span class="nx">before</span></code> and <code class="highlight"><span class="nx">after</span></code> methods for this needs.</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">.</span><span class="nc">alert</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="kt">px</span><span class="p">;</span>
<span class="w">  </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="mh">#d6e9c6</span><span class="p">;</span>
<span class="w">  </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
<span class="w">  </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#3c763d</span><span class="p">;</span>
<span class="w">  </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#dff0d8</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="c1">// 1. Create &lt;div&gt; element</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">div</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="c1">// 2. Set its class to &quot;alert&quot;</span>
<span class="w">  </span><span class="nx">div</span><span class="p">.</span><span class="nx">className</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;alert&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="c1">// 3. Fill it with the content</span>
<span class="w">  </span><span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&lt;strong&gt;Hi there!&lt;/strong&gt; You&#39;ve read an important message.&quot;</span><span class="p">;</span>

<span class="w">  </span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">div</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="cm">&lt;!-- alternative variant using insertAdjacentHTML --&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">insertAdjacentHTML</span><span class="p">(</span><span class="s2">&quot;afterbegin&quot;</span><span class="p">,</span><span class="w"> </span><span class="sb">`&lt;div class=&quot;alert&quot;&gt;</span>
<span class="sb">    &lt;strong&gt;Hi there!&lt;/strong&gt; You&#39;ve read an important message.</span>
<span class="sb">  &lt;/div&gt;`</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- inserting multiple nodes and text pieces in a single call --&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;div&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="nx">div</span><span class="p">.</span><span class="nx">before</span><span class="p">(</span><span class="s1">&#39;&lt;p&gt;Hello&lt;/p&gt;&#39;</span><span class="p">,</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;hr&#39;</span><span class="p">));</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">All insertion methods automatically remove the node from the old place.</p>
<p>For instance, let’s swap elements:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;first&quot;</span><span class="p">&gt;</span>First<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;second&quot;</span><span class="p">&gt;</span>Second<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="c1">// no need to call remove</span>
<span class="w">  </span><span class="nx">second</span><span class="p">.</span><span class="nx">after</span><span class="p">(</span><span class="nx">first</span><span class="p">);</span><span class="w"> </span><span class="c1">// take #second and after it insert #first</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
</div>
<ul>
<li>
<p><a href="https://javascript.info/modifying-document#document-fragment" target="_blank"><strong>DocumentFragment</strong></a> - a special DOM node that serves as a wrapper to pass around lists of nodes. It is rarely used explicitly.</p>
<p><code>DocumentFragment</code> mentioned here mainly because there are some concepts on top of it, like <code class="highlight"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;&lt;/</span><span class="nt">template</span><span class="p">&gt;</span></code> element.</p>
</li>
<li>
<p><strong><em>document</em>.write(html)</strong> - append HTML to the page before it has finished loading</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Somewhere in the page...<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="nb">document</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;Hello from JS&lt;/b&gt;&#39;</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>The end<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</code></pre></div>
<p>The call to <code class="highlight"><span class="nb">document</span><span class="p">.</span><span class="nx">write</span></code> only works while the page is loading. So it’s kind of unusable at “after loaded” stage, unlike other DOM methods.</p>
<p>Technically, when <code class="highlight"><span class="nb">document</span><span class="p">.</span><span class="nx">write</span></code> is called while the browser is reading (“parsing”) incoming HTML, and it writes something, the browser consumes it just as if it were initially there, in the HTML text. So it works blazingly fast, because there’s <ins>no DOM modification</ins> involved. It writes directly into the page text, while the DOM is not yet built.</br>
So if we need to add a lot of text into HTML dynamically, and we’re at page loading phase, and the speed matters, it may help. But in practice these requirements rarely come together. And usually we can see this method in scripts just because they are old.</p>
<div class="admonition note">
<p class="admonition-title">After the page is loaded such a call erases the document.</p>
</div>
</li>
</ul>
<h4 id="insertion-and-removalold-school-methods">Insertion and removal(“old school” methods)</h4>
<ul>
<li><strong><em>parent</em>.appendChild(<em>node</em>)</strong> - appends <code>node</code> as the <ins>last child</ins> of <code>parentElem</code></li>
<li>
<p><strong><em>parent</em>.insertBefore(<em>node</em>, nextSibling)</strong> - inserts <code>node</code> <ins>before</ins> <code>nextSibling</code> into <code>parentElem</code></p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">ol</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;list&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>0<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>1<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>2<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ol</span><span class="p">&gt;</span>

<span class="cm">&lt;!-- insert a new list item before the second &lt;li&gt; --&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">newLi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="nx">newLi</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Hello, world!&#39;</span><span class="p">;</span>

<span class="w">  </span><span class="nx">list</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">newLi</span><span class="p">,</span><span class="w"> </span><span class="nx">list</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mf">1</span><span class="p">]);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="cm">&lt;!--  insert &#39;newLi&#39; as the first element --&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="nx">list</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">newLi</span><span class="p">,</span><span class="w"> </span><span class="nx">list</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
</li>
<li>
<p><strong><em>parent</em>.removeChild(<em>node</em>)</strong> - removes <code>node</code> from <code>parentElem</code> (assuming <code>node</code> is its child)</p>
</li>
<li><strong><em>parent</em>.replaceChild(<em>newElement</em>, <em>node</em>)</strong> - replaces <code>oldChild</code> with <code>node</code> among children of <code>parentElem</code></li>
</ul>
<div class="admonition note">
<p class="admonition-title">All these methods return the inserted/removed <code>node</code>.</p>
<p>But usually the returned value is not used, we just run the method.</p>
</div>
<h3 id="changing-element-properties-class-style">Changing element properties: class, style</h3>
<h4 id="class">class</h4>
<ul>
<li>
<p><strong><em>element</em>.className</strong> – corresponds to the <code class="highlight">class</code> attribute; the string value, good to manage the whole set of classes</p>
<div class="highlight"><pre><span></span><code><span class="c1">// returns the class name(s) of an element as string</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;h1&quot;</span><span class="p">).</span><span class="nx">className</span><span class="p">;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">// sets the class name of an element (i.e. removes existing class names if any and then adds the new one)</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;h1&quot;</span><span class="p">).</span><span class="nx">className</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;coolTitle&quot;</span><span class="p">;</span>
</code></pre></div>
</li>
<li>
<p><strong><em>element</em>.classList</strong>– the object with methods <code>add/remove/toggle/contains</code>, good for individual classes</p>
<div class="highlight"><pre><span></span><code><span class="c1">// return a list of classes of the element as iterable,</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;h1&quot;</span><span class="p">).</span><span class="nx">classList</span><span class="p">;</span>

<span class="c1">// so we can list all classes with &#39;for..of&#39; loop</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;h1&quot;</span><span class="p">).</span><span class="nx">classList</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">// sets the class name of an element (i.e. removes existing class names if any and then adds the new one)</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;h1&quot;</span><span class="p">).</span><span class="nx">classList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;coolTitle&quot;</span><span class="p">;</span>
</code></pre></div>
<p>Methods of classList:</p>
<ul>
<li><strong><em>element</em>.classList.add/remove("class")</strong> – adds/removes the class</li>
<li><strong><em>element</em>.classList.toggle("class")</strong> – adds the class if it doesn’t exist, otherwise removes it</li>
<li><strong><em>element</em>.classList.contains("class")</strong> – checks for the given class, returns <code>true/false</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;h1&quot;</span><span class="p">).</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;done&quot;</span><span class="p">);</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;h1&quot;</span><span class="p">).</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s2">&quot;done&quot;</span><span class="p">);</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;h1&quot;</span><span class="p">).</span><span class="nx">classList</span><span class="p">.</span><span class="nx">toggle</span><span class="p">(</span><span class="s2">&quot;done&quot;</span><span class="p">);</span>
</code></pre></div>
</li>
</ul>
<h4 id="style">style</h4>
<ul>
<li>
<p><strong><em>element</em>.style.[<em>css-property</em>]</strong> - corresponds to what’s written in the <code class="highlight">style</code> attribute</p>
<div class="admonition note">
<p class="admonition-title">All elements on the web page have a 'style' attribute</p>
</div>
<div class="highlight"><pre><span></span><code><span class="c1">// return the whole bunch of CSS properties of the element(a long list):</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;h1&quot;</span><span class="p">).</span><span class="nx">style</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">// set background to yellow:</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;h1&quot;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroud</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;yellow&quot;</span><span class="p">;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- the above is the exact thing as: --&gt;</span>
<span class="p">&lt;</span><span class="nt">h1</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;background: yellow&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">// two ways to reset style property, e.g. given:</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">background</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;red&#39;</span><span class="p">;</span>

<span class="c1">// 1. set the property to an empty string</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">background</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">;</span>

<span class="c1">// 2. element.style.removeProperty(&#39;style property&#39;)</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">removeProperty</span><span class="p">(</span><span class="s1">&#39;background&#39;</span><span class="p">);</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- Don’t forget to add CSS units to values --&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">    </span><span class="c1">// doesn&#39;t work!</span>
<span class="w">    </span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">margin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">20</span><span class="p">;</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">margin</span><span class="p">);</span><span class="w"> </span><span class="c1">// &#39;&#39; (empty string, the assignment is ignored)</span>

<span class="w">    </span><span class="c1">// now add the CSS unit (px) - and it works</span>
<span class="w">    </span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">margin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;20px&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">margin</span><span class="p">);</span><span class="w"> </span><span class="c1">// 20px</span>

<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">marginTop</span><span class="p">);</span><span class="w"> </span><span class="c1">// 20px</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">marginLeft</span><span class="p">);</span><span class="w"> </span><span class="c1">// 20px</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="cm">&lt;!-- Please note: the browser “unpacks” the property &#39;style.margin&#39; in the last lines</span>
<span class="cm">and infers &#39;style.marginLeft&#39; and &#39;style.marginTop&#39; from it. --&gt;</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">For multi-word property the camelCase is used (a dash <code>-</code> means upper case):</p>
<table>
<thead>
<tr>
<th>CSS property</th>
<th>→</th>
<th><code class="highlight"><span class="nx">style</span></code> object property</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>background-color</code></td>
<td>→</td>
<td>elem.style.backgroundColor</td>
</tr>
<tr>
<td><code>z-index</code></td>
<td>→</td>
<td>elem.style.zIndex</td>
</tr>
<tr>
<td><code>border-left-width</code></td>
<td>→</td>
<td>elem.style.borderLeftWidth</td>
</tr>
<tr>
<td><code>-moz-border-radius</code></td>
<td>→</td>
<td>element.style.MozBorderRadius</td>
</tr>
<tr>
<td><code>-webkit-border-radius</code></td>
<td>→</td>
<td>element.style.WebkitBorderRadius</td>
</tr>
</tbody>
</table>
<p>and so on...</p>
</div>
<div class="admonition tip">
<p class="admonition-title">How to apply other staff.</p>
<p>To see how to apply <code>important</code> and other rare stuff – there’s a list of methods at <a href="https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration" target="_blank">MDN</a>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">The <code class="highlight"><span class="nx">element</span><span class="p">.</span><span class="nx">style</span></code> property operates only on the value of the <ins><code>"style"</code> attribute</ins>, without any CSS cascade.</p>
<p>To read anything that comes from CSS classes use <code class="highlight"><span class="nx">getComputedStyle</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">pseudo</span><span class="p">])</span></code>, see below.</p>
</div>
<p><em>element</em>.style is an object, and it’s read-only,</br>
so we can’t set the full style like <code class="highlight"><span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="o">=</span><span class="s2">&quot;color: red; width: 100px&quot;</span></code>.</br>
Instead <code class="highlight"><span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span></code> below can be used.</p>
</li>
<li>
<p><strong><em>element</em>.style.cssText</strong> - corresponds to the whole "style" attribute, the full string of styles</p>
<p><strong><em>element</em>.style.cssText = `<em>css-property1: value1; css-property2: value2; ...</em>`</strong> - full style rewrite</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;div&quot;</span><span class="p">&gt;</span>Button<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="c1">// we can set special style flags like &quot;important&quot; here</span>
<span class="w">  </span><span class="nx">div</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span><span class="o">=</span><span class="sb">`color: red !important;</span>
<span class="sb">    background-color: yellow;</span>
<span class="sb">    width: 100px;</span>
<span class="sb">    text-align: center;</span>
<span class="sb">  `</span><span class="p">;</span>

<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="nx">div</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">This property is rarely used.</p>
<p>Because such assignment removes all existing styles: it does not add, but replaces them. May occasionally delete something needed. But we can safely use it for new elements, when we know we won’t delete an existing style.</br>
The code above can be accomplished by <a href="#html-attributes-vs-dom-properties"><mark><ins>setting an attribute</ins></mark></a>: <code class="highlight"><span class="nx">div</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;color: red...&#39;</span><span class="p">)</span></code></p>
</div>
</li>
<li>
<p><strong>getComputedStyle(<em>element</em>, [pseudo])</strong> - reads the resolved(= <em>resolved value</em> of the property, usually in <code>px</code> for geometry) styles(with respect to all classes, after all CSS is applied and final values are calculated)</p>
<p><strong>[pseudo]</strong> - a pseudo-element if required, for instance <code class="highlight"><span class="p">::</span><span class="nd">before</span></code>. An empty string or no argument means the element itself.</p>
<p>Returns the <code class="highlight"><span class="nx">element</span><span class="p">.</span><span class="nx">style</span></code>-like object. Read-only.</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span><span class="w"> </span><span class="nt">body</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="kc">red</span><span class="p">;</span><span class="w"> </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="kt">px</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">computedStyle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// now we can read the margin and the color from it</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nx">computedStyle</span><span class="p">.</span><span class="nx">marginTop</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// 5px</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="w"> </span><span class="nx">computedStyle</span><span class="p">.</span><span class="nx">color</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgb(255, 0, 0)</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title"><code class="highlight"><span class="nx">getComputedStyle</span></code> requires the full property name</p>
<p>We should always ask for the exact property that we want, like <code>paddingLeft</code> or <code>marginTop</code> or <code>borderTopWidth</code>. Otherwise the correct result is not guaranteed.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Styles applied to <code class="highlight"><span class="p">:</span><span class="nd">visited</span></code> links are hidden!</p>
<p>Visited links may be colored using <code class="highlight"><span class="p">:</span><span class="nd">visited</span></code> CSS pseudoclass.</p>
<p>But <code class="highlight"><span class="nx">getComputedStyle</span></code> does not give access to that color, because otherwise an arbitrary page could find out whether the user visited a link by creating it on the page and checking the styles.</p>
<p>JavaScript may not see the styles applied by <code class="highlight"><span class="p">:</span><span class="nd">visited</span></code>. And also, there’s a limitation in CSS that forbids applying geometry-changing styles in <code class="highlight"><span class="p">:</span><span class="nd">visited</span></code>. That’s to guarantee that there’s no side way for an evil page to test if a link was visited and hence to break the privacy.</p>
</div>
</li>
</ul>
<h4 id="styles-working-tips">styles: working tips</h4>
<ul>
<li>
<p>We should always prefer CSS classes to <code class="highlight"><span class="nx">element</span><span class="p">.</span><span class="nx">style</span></code>, because the latter breaks the <em>separation of control</em> concept by adding <ins><code>style</code> attribute</ins> to selected element. The <code class="highlight"><span class="nx">element</span><span class="p">.</span><span class="nx">style</span></code> should only be used if classes “can’t handle it”.</p>
<p>For example, <code class="highlight"><span class="nx">element</span><span class="p">.</span><span class="nx">style</span></code> is acceptable if we calculate coordinates of an element dynamically and want to set them from JavaScript, like this:</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nx">top</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="cm">/* complex calculations */</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="cm">/*complex calculations*/</span><span class="p">;</span>

<span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">left</span><span class="p">;</span><span class="w"> </span><span class="c1">// e.g &#39;123px&#39;, calculated at run-time</span>
<span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">top</span><span class="p">;</span><span class="w"> </span><span class="c1">// e.g &#39;456px&#39;</span>
</code></pre></div>
<p>For other cases, like making the text red, adding a background icon – describe that in CSS and then add the class (JavaScript can do that). That’s more flexible and easier to support.</p>
</li>
<li>
<p>Converting string property value to number using <code class="highlight"><span class="nb">parseInt</span><span class="p">()</span></code>, in order to do math with it later.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// get element</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">elem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;h1&#39;</span><span class="p">);</span>

<span class="c1">// element style</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">elemStyle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="nx">elem</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">elemStyle</span><span class="p">.</span><span class="nx">paddingLeft</span><span class="p">);</span><span class="w"> </span><span class="c1">// e.g. 20px</span>

<span class="c1">// get number</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">paddingLeft</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">elemStyle</span><span class="p">.</span><span class="nx">paddingLeft</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">paddingLeft</span><span class="p">);</span><span class="w"> </span><span class="c1">// e.g. 20</span>
</code></pre></div>
</li>
</ul>
<h3 id="html-attributes-vs-dom-properties">HTML attributes vs. DOM properties</h3>
<div class="admonition tip">
<p class="admonition-title">For most situations using DOM properties is preferable.</p>
<p>We should refer to attributes only when DOM properties do not suit us, when we need exactly attributes, for instance:</p>
<ul>
<li>We need a non-standard non-“data-*” attribute. See <a href="#non-standard-attributes-use-cases"><mark>Non-standard attributes use cases</mark></a></li>
<li>We want to read the value “as written” in HTML. For instanse: see <a href="#html-attributes"><mark>note</mark></a> about <code>href</code> attribute later on this page.</li>
</ul>
</div>
<h4 id="dom-properties">DOM properties</h4>
<p>DOM nodes are regular JavaScript objects.</p>
<ul>
<li>
<p>We can alter them.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// create a new property in document.body</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">myData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Caesar&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Imperator&#39;</span>
<span class="p">};</span>
<span class="nx">alert</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">myData</span><span class="p">.</span><span class="nx">title</span><span class="p">);</span><span class="w"> </span><span class="c1">// Imperator</span>

<span class="c1">// add a method</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">sayTagName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tagName</span><span class="p">);</span>
<span class="p">};</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">sayTagName</span><span class="p">();</span><span class="w"> </span><span class="c1">// BODY (the value of &quot;this&quot; in the method is document.body)</span>

<span class="c1">// modify built-in prototypes like Element.prototype and add new methods to all elements</span>
<span class="nx">Element</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">sayHi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="sb">`Hello, I&#39;m </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">tagName</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="p">};</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">sayHi</span><span class="p">();</span><span class="w"> </span><span class="c1">// Hello, I&#39;m HTML</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">sayHi</span><span class="p">();</span><span class="w"> </span><span class="c1">// Hello, I&#39;m BODY</span>
</code></pre></div>
</li>
<li>
<p>They can have any value and they are not always strings, i.e. they are typed(типизированные)</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- For instance, the element.input.checked property (for checkboxes) is a boolean --&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;input&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">checked</span><span class="p">&gt;</span> checkbox

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelecor</span><span class="p">(</span><span class="s2">&quot;#input&quot;</span><span class="p">);</span>

<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="nx">input</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;checked&#39;</span><span class="p">));</span><span class="w"> </span><span class="c1">// the attribute value is: empty string</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="nx">input</span><span class="p">.</span><span class="nx">checked</span><span class="p">);</span><span class="w"> </span><span class="c1">// the property value is: true</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- The &quot;style&quot; attribute is a string, but the &#39;style&#39; property is an object. --&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;div&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;color:red;font-size:120%&quot;</span><span class="p">&gt;</span>Hello<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">div</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelecor</span><span class="p">(</span><span class="s2">&quot;#div&quot;</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// string</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="nx">div</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">));</span><span class="w"> </span><span class="c1">// color:red;font-size:120%</span>

<span class="w">  </span><span class="c1">// object</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="nx">div</span><span class="p">.</span><span class="nx">style</span><span class="p">);</span><span class="w"> </span><span class="c1">// [object CSSStyleDeclaration]</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="nx">div</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">color</span><span class="p">);</span><span class="w"> </span><span class="c1">// red</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Most properties are strings.</p>
<p>Quite rarely, even if a DOM property type is a string, its valur may differ from the attribute's value. See <a href="#html-attributes"><mark>note</mark></a> about <code>href</code> attribute later on this page.</p>
</div>
</li>
<li>
<p>They are case-sensitive (write <code class="highlight"><span class="nx">element</span><span class="p">.</span><span class="nx">nodeType</span></code>, not <code class="highlight"><span class="nx">element</span><span class="p">.</span><span class="nx">NoDeTyPe</span></code>).</p>
</li>
</ul>
<h4 id="html-attributes">HTML attributes</h4>
<p>When the browser parses the HTML to create DOM objects for tags, it recognizes <strong>standard</strong> attributes and creates the corresponding DOM properties from them. But that doesn’t happen if the attribute is <strong>non-standard</strong>.</p>
<p>Most <strong>standard</strong> HTML attributes have the corresponding DOM properties. They described in the specification for the corresponding element class(see <a href="https://html.spec.whatwg.org/" target="_blank">WHATWG: HTML Living Standard</a>).</br>
For instance, <code>HTMLInputElement</code> class is documented at <a href="https://html.spec.whatwg.org/#htmlinputelement" target="_blank">https://html.spec.whatwg.org/#htmlinputelement</a>.</br></p>
<div class="admonition tip">
<p class="admonition-title">Alternative way to get DOM properties</p>
<p>If we’d like to get them fast or are interested in a concrete browser specification – we can always output the element using <code>console.dir(element)</code> and read the properties.</br>
Or explore “DOM properties” in the Elements tab of the browser developer tools.</p>
</div>
<p>HTML attributes have the following features:</p>
<ul>
<li>Their values are always strings.</li>
<li>Their name is case-insensitive (<code>id</code> is same as <code>ID</code>), but usually attributes are lowercased.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">body</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;test&quot;</span> <span class="na">something</span><span class="o">=</span><span class="s">&quot;non-standard&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span><span class="w"> </span><span class="c1">// test</span>
<span class="w">    </span><span class="c1">// non-standard attribute does not yield a property</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">something</span><span class="p">);</span><span class="w"> </span><span class="c1">// undefined</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</code></pre></div>
<p>A standard attribute for one element can be unknown for another one. For instance, "type" is standard for <code class="highlight"><span class="p">&lt;</span><span class="nt">input</span><span class="p">&gt;</span></code>(<code>HTMLInputElement</code> specification class), but not for <code class="highlight"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span></code> (<code>HTMLBodyElement</code> specification class).</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">body</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;body&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;...&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;input&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nx">input</span><span class="p">.</span><span class="nx">type</span><span class="p">);</span><span class="w"> </span><span class="c1">// text</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">type</span><span class="p">);</span><span class="w"> </span><span class="c1">// undefined: DOM property not created, because it&#39;s non-standard</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</code></pre></div>
<p>Examples of <strong>standard</strong> attributes and their corresponing DOM nodes properties(depending on their specification class):</p>
<ul>
<li><code class="highlight"><span class="nx">id</span></code> – the value of “id” attribute, for all elements (<code>HTMLElement</code> class).</li>
<li><code class="highlight"><span class="nx">value</span></code> – the value for <code class="highlight"><span class="p">&lt;</span><span class="nt">input</span><span class="p">&gt;</span></code>, <code class="highlight"><span class="p">&lt;</span><span class="nt">select</span><span class="p">&gt;</span></code> and <code class="highlight"><span class="p">&lt;</span><span class="nt">textarea</span><span class="p">&gt;</span></code> (classes: <code>HTMLInputElement</code>, <code>HTMLSelectElement</code>…).</li>
<li>
<p><code class="highlight"><span class="nx">href</span></code> – the “href” for <code class="highlight"><span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;...&quot;</span><span class="p">&gt;</span></code> (<code>HTMLAnchorElement</code> class).</p>
<div class="admonition note">
<p class="admonition-title"><code class="highlight"><span class="nx">href</span></code> DOM property is always a <ins>full URL</ins>.</p>
<p>Even if the attribute contains a relative URL or just a <code>#hash</code>.</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">a</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;a&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;#hello&quot;</span><span class="p">&gt;</span>link<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelecor</span><span class="p">(</span><span class="s2">&quot;#a&quot;</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// attribute</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;href&#39;</span><span class="p">));</span><span class="w"> </span><span class="c1">// #hello</span>

<span class="w">  </span><span class="c1">// property</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">href</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// full URL in the form http://site.com/page#hello</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
</div>
</li>
<li>
<p>…and much more…</p>
</li>
</ul>
<p><ins>All</ins> attributes are accessible by using the following methods:</p>
<ul>
<li>
<p><strong><em>element</em>.attributes</strong> - read all attributes and return an iterable collection(can be iterated with <code class="highlight"><span class="k">for</span><span class="p">...</span><span class="k">of</span></code> loop) of objects that belong to a built-in <a href="https://dom.spec.whatwg.org/#attr" target="_blank">Attr</a> class, with <code>name</code> and <code>value</code> properties</p>
</li>
<li>
<p><strong><em>element</em>.hasAttribute("name")</strong> – checks for existence</p>
</li>
<li>
<p><strong><em>element</em>.getAttribute("name")</strong> – gets the value <ins>as string</ins> exactly as written in the HTML</p>
<div class="highlight"><pre><span></span><code><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;img&quot;</span><span class="p">).</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">);</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">body</span> <span class="na">something</span><span class="o">=</span><span class="s">&quot;non-standard&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;Something&#39;</span><span class="p">));</span><span class="w"> </span><span class="c1">// non-standard; the first letter is uppercase here,</span>
<span class="w">    </span><span class="c1">// and in HTML it’s all lowercase. But that doesn’t matter: attribute names are case-insensitive.</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</code></pre></div>
</li>
<li>
<p><strong><em>element</em>.setAttribute("name", "value")</strong> – sets the value <ins>as string</ins></p>
<div class="highlight"><pre><span></span><code><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;img&quot;</span><span class="p">).</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;5px&quot;</span><span class="p">);</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Can be used to change styles by changing value of 'class' atribute.</p>
<p>But this is the "old school" way as we have more advanced method to manipulate the style. See <a href="#class"><mark>above</mark></a>.</p>
</div>
</li>
<li>
<p><strong><em>element</em>.removeAttribute("name")</strong> – removes the attribute</p>
</li>
</ul>
<h4 id="property-attribute-synchronization">Property-attribute synchronization</h4>
<p>When a standard attribute changes, the corresponding property is auto-updated, and (with some exceptions) vice versa.</p>
<p>In the example below id is modified as an attribute, and we can see the property changed too. And then the same backwards:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">input</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// attribute =&gt; property</span>
<span class="w">  </span><span class="nx">input</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="nx">input</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span><span class="w"> </span><span class="c1">// id (updated)</span>

<span class="w">  </span><span class="c1">// property =&gt; attribute</span>
<span class="w">  </span><span class="nx">input</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;newId&#39;</span><span class="p">;</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="nx">input</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">));</span><span class="w"> </span><span class="c1">// newId (updated)</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
<p>But there are exclusions, for instance:</p>
<ul>
<li>
<p><code class="highlight"><span class="nx">element</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">value</span></code> synchronizes only from attribute → property, but not back</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">input</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// attribute =&gt; property</span>
<span class="w">  </span><span class="nx">input</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;text&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="nx">input</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span><span class="w"> </span><span class="c1">// text</span>

<span class="w">  </span><span class="c1">// NOT property =&gt; attribute</span>
<span class="w">  </span><span class="nx">input</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;newValue&#39;</span><span class="p">;</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="nx">input</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">));</span><span class="w"> </span><span class="c1">// text (not updated!)</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">That “feature” may actually come in handy.</p>
<p>Because the user actions may lead to <code>value</code> changes, and then after them, if we want to recover the “original” value from HTML, it’s in the attribute.</p>
</div>
</li>
</ul>
<h4 id="non-standard-attributes-use-cases">Non-standard attributes use cases</h4>
<ul>
<li>To pass custom data from HTML to JavaScript.</li>
<li>
<p>To <strong>“mark”</strong> HTML-elements for JavaScript.</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- mark the div to show &quot;name&quot; here --&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">show-info</span><span class="o">=</span><span class="s">&quot;name&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="cm">&lt;!-- and age here --&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">show-info</span><span class="o">=</span><span class="s">&quot;age&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="c1">// the code finds an element with the mark and shows what&#39;s requested</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Pete&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">age</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="k">for</span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">div</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;[show-info]&#39;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// insert the corresponding info into the field</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">div</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;show-info&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">user</span><span class="p">[</span><span class="nx">field</span><span class="p">];</span><span class="w"> </span><span class="c1">// first Pete into &quot;name&quot;, then 25 into &quot;age&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
</li>
<li>
<p>To style an element.</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--  For instance, here for the order state the attribute &quot;order-state&quot; is used:--&gt;</span>
<span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="w">  </span><span class="c">/* styles rely on the custom attribute &quot;order-state&quot; */</span>
<span class="w">  </span><span class="p">.</span><span class="nc">order</span><span class="o">[</span><span class="nt">order-state</span><span class="o">=</span><span class="s2">&quot;new&quot;</span><span class="o">]</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="kc">green</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="p">.</span><span class="nc">order</span><span class="o">[</span><span class="nt">order-state</span><span class="o">=</span><span class="s2">&quot;pending&quot;</span><span class="o">]</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="kc">blue</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="p">.</span><span class="nc">order</span><span class="o">[</span><span class="nt">order-state</span><span class="o">=</span><span class="s2">&quot;canceled&quot;</span><span class="o">]</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="kc">red</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;order&quot;</span> <span class="na">order-state</span><span class="o">=</span><span class="s">&quot;new&quot;</span><span class="p">&gt;</span>
  A new order.
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;order&quot;</span> <span class="na">order-state</span><span class="o">=</span><span class="s">&quot;pending&quot;</span><span class="p">&gt;</span>
  A pending order.
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;order&quot;</span> <span class="na">order-state</span><span class="o">=</span><span class="s">&quot;canceled&quot;</span><span class="p">&gt;</span>
  A canceled order.
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
<p>Why would using an attribute be preferable to having classes like <code class="highlight"><span class="p">.</span><span class="nc">order-state-new</span></code>, <code class="highlight"><span class="p">.</span><span class="nc">order-state-pending</span></code>, <code class="highlight"><span class="p">.</span><span class="nc">order-state-canceled</span></code>?</br>
Because an attribute is more convenient to manage. The state can be changed as easy as:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// a bit simpler than removing old/adding a new class</span>
<span class="nx">div</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;order-state&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;canceled&#39;</span><span class="p">);</span>
</code></pre></div>
</li>
</ul>
<h4 id="dataset-dom-property"><code class="highlight"><span class="nx">dataset</span></code> DOM property</h4>
<p>Possible problem with custom(non-standard) attributes: they can appear in standard specifications in the future and therefore become unavailable for our use. To avoid conflicts, there exist <a href="https://html.spec.whatwg.org/#embedding-custom-non-visible-data-with-the-data-*-attributes" target="_blank">"data-*"</a> attributes. They are actually a safe way to pass custom data.</p>
<p>All attributes starting with <strong>“data-”</strong> are reserved for programmers’ use.</br>
They are available in the <strong><em>element</em>.dataset.[“data-*“ attribute(with ommited “data-” part) in camelCase]</strong> property.</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">.</span><span class="nc">order</span><span class="o">[</span><span class="nt">data-order-state</span><span class="o">=</span><span class="s2">&quot;new&quot;</span><span class="o">]</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="kc">green</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="p">.</span><span class="nc">order</span><span class="o">[</span><span class="nt">data-order-state</span><span class="o">=</span><span class="s2">&quot;pending&quot;</span><span class="o">]</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="kc">blue</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="p">.</span><span class="nc">order</span><span class="o">[</span><span class="nt">data-order-state</span><span class="o">=</span><span class="s2">&quot;canceled&quot;</span><span class="o">]</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="kc">red</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;order&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;order&quot;</span> <span class="na">data-order-state</span><span class="o">=</span><span class="s">&quot;new&quot;</span><span class="p">&gt;</span>
  A new order.
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="c1">// read</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">orderState</span><span class="p">);</span><span class="w"> </span><span class="c1">// new</span>

<span class="w">  </span><span class="c1">// modify</span>
<span class="w">  </span><span class="nx">order</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">orderState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;pending&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// we can not only read, but also modify data-attributes</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
<h2 id="dom-events">DOM Events</h2>
<p>An <strong>event</strong> is a signal that something has happened(user actions, document events, CSS events etc.). All DOM nodes generate such signals(but events are not limited to DOM).</p>
<h3 id="event-handlers">Event handlers</h3>
<p><strong>Handler</strong> - is a function that assigned to an event and runs when event happens.</p>
<p>There are 3 ways to assign event handlers:</p>
<ol>
<li>
<p>HTML attribute: <code>on&lt;event&gt;="..."</code>(<code>...</code> - JavaScript code).</p>
<p>The browser reads it, creates a new function from the attribute content and writes it to the DOM property.</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- inside onclick we use single quotes, because the attribute itself is in double quotes --&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Click me&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;alert(&#39;Click!&#39;)&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span><span class="p">&gt;</span>

<span class="cm">&lt;!-- An HTML-attribute is not a convenient place to write a lot of code,</span>
<span class="cm">so we’d better create a JavaScript function and call it there. --&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">countRabbits</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="o">=</span><span class="mf">1</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">&lt;=</span><span class="mf">3</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Rabbit number &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">i</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;countRabbits()&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Count rabbits!&quot;</span><span class="p">&gt;</span>
</code></pre></div>
<p>Accessing the element using <code class="highlight"><span class="k">this</span></code></p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- The value of &#39;this&#39; inside a handler is the element. The one which has the handler on it. --&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;alert(this.innerHTML)&quot;</span><span class="p">&gt;</span>Click me<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span> <span class="cm">&lt;!-- Click me --&gt;</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">HTML attributes are used sparingly.</p>
<p>Because JavaScript in the middle of an HTML tag looks a little bit odd and alien. Also can’t write lots of code in there.</p>
</div>
</li>
<li>
<p>DOM property: <strong><em>element</em>.on&lt;event> = function</strong>.</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- we can’t assign more than one handler of the particular event --&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;elem&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;alert(&#39;Before&#39;)&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Click me&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">elem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelecor</span><span class="p">(</span><span class="s2">&quot;#elem&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="nx">elem</span><span class="p">.</span><span class="nx">onclick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// overwrites the existing handler</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;After&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// only this will be shown</span>
<span class="w">  </span><span class="p">};</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
<p>Set an existing function as a handler.</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">sayThanks</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Thanks!&#39;</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// function should be assigned without parentheses</span>
<span class="nx">elem</span><span class="p">.</span><span class="nx">onclick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">sayThanks</span><span class="p">;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- On the other hand, in the markup we do need the parentheses --&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;sayThanks()&quot;</span><span class="p">&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">/* When the browser reads the attribute, it creates a handler function</span>
<span class="cm">with body from the attribute content. So the markup generates this property: */</span>
<span class="nx">button</span><span class="p">.</span><span class="nx">onclick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">sayThanks</span><span class="p">();</span><span class="w"> </span><span class="c1">// &lt;-- the attribute content goes here</span>
<span class="p">};</span>
</code></pre></div>
<p>To remove a handler – assign <strong><em>element</em>.on&lt;event> = null</strong></p>
</li>
<li>
<p>Methods: <strong><em>element</em>.addEventListener(event, handler[, options])</strong> to add handler,</br>
   <strong><em>element</em>.removeEventListener(event, handler[, options])</strong> to remove handler.</p>
<ul>
<li><code>event</code> - Event name, e.g. <code>"click"</code>.</li>
<li><code>handler</code> - The handler function.</li>
<li>
<p><code>options</code> - An additional optional object with properties:</p>
<ul>
<li><code>once</code>: if <code>true</code>, then the listener is automatically removed after it triggers.</li>
<li><code>capture</code>: the <em>phase</em> where to handle the event. See in <a href="#bubbling-and-capturing"><mark>Bubbling and capturing</mark></a> point.</br>
   For historical reasons, <code>options</code> can also be <code>false/true</code>, that’s the same as <code>{capture: false/true}</code>.</li>
<li>
<p><code>passive</code>: if <code>true</code>, then the handler will not call <code class="highlight"><span class="nx">preventDefault</span><span class="p">()</span></code>(trying to do this will throw an error).</br>
That’s useful for some mobile events, like <code>touchstart</code> and <code>touchmove</code>, to tell the browser that it should not wait for all handlers to finish before scrolling.</br></p>
<blockquote>
<p>For some browsers (Firefox, Chrome), <code>passive</code> is <code>true</code> by default for <code>touchstart</code> and <code>touchmove</code> events.</p>
</blockquote>
<p>See more about <code class="highlight"><span class="nx">preventDefault</span><span class="p">()</span></code> in <a href="#preventing-browser-actions"><mark>Preventing browser actions</mark></a> point.</p>
</li>
</ul>
</li>
</ul>
<p>To remove a handler:</p>
<ul>
<li>
<p>we should pass exactly the same function as was assigned</p>
<div class="highlight"><pre><span></span><code><span class="c1">// The handler won’t be removed, because &#39;removeEventListener&#39; gets another function</span>
<span class="c1">//  – with the same code, but that doesn’t matter, as it’s a different function object.</span>
<span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Thanks!&#39;</span><span class="p">));</span>
<span class="c1">// ....</span>
<span class="nx">elem</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Thanks!&#39;</span><span class="p">));</span>

<span class="c1">// Here’s the right way:</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">handler</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Thanks!&#39;</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">input</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">handler</span><span class="p">);</span>
<span class="c1">// ....</span>
<span class="nx">input</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">handler</span><span class="p">);</span>
<span class="c1">// Please note – if we don’t store the function in a variable, then we can’t remove it.</span>
<span class="c1">// There’s no way to “read back” handlers assigned by &#39;addEventListener&#39;.</span>
</code></pre></div>
</li>
<li>
<p>also the <em>phase</em> should be the same</p>
<p>If we <code class="highlight"><span class="nx">addEventListener</span><span class="p">(...,</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span></code>, then we should mention the same phase in</br>
<code class="highlight"><span class="nx">removeEventListener</span><span class="p">(...,</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span></code> to correctly remove the handler.</p>
</li>
</ul>
<p><strong><em>element</em>.addEventListener(event, handler[, options])</strong> allows to assign multiple handlers to one event.</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;elem&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Click me&quot;</span><span class="p">/&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">handler1</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Thanks!&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">handler2</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Thanks again!&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">elem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">documnet</span><span class="p">.</span><span class="nx">querySelecor</span><span class="p">(</span><span class="s2">&quot;#elem&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="nx">elem</span><span class="p">.</span><span class="nx">onclick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">handler1</span><span class="p">);</span><span class="w"> </span><span class="c1">// Thanks!</span>
<span class="w">  </span><span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">handler2</span><span class="p">);</span><span class="w"> </span><span class="c1">// Thanks again!</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="cm">&lt;!-- We can set handlers both using a DOM-property and &#39;addEventListener&#39;.</span>
<span class="cm">But generally we use only one of these ways. --&gt;</span>
</code></pre></div>
<p>For some events, handlers only work with <strong><em>element</em>.addEventListener</strong></p>
<ul>
<li>
<p><code>DOMContentLoaded</code> event - triggers when the document is loaded and DOM is built</p>
<div class="highlight"><pre><span></span><code><span class="c1">// will never run</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">onDOMContentLoaded</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;DOM built&quot;</span><span class="p">);</span>
<span class="p">};</span>

<span class="c1">// this way it works</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;DOMContentLoaded&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;DOM built&quot;</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
</li>
<li>
<p><code>transitionend</code> event</p>
</li>
</ul>
<p>Also <strong><em>element</em>.addEventListener</strong> supports <em>objects</em> as event handlers. In that case the method <code class="highlight"><span class="nx">handleEvent</span></code> is called in case of the event.</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;elem&quot;</span><span class="p">&gt;</span>Click me<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">handleEvent</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">alert</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">type</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot; at &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">elem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelecor</span><span class="p">(</span><span class="s2">&quot;#elem&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">obj</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="cm">&lt;!-- As we can see, when &#39;addEventListener&#39; receives an object as the handler,</span>
<span class="cm">it calls &#39;obj.handleEvent(event)&#39; in case of an event. --&gt;</span>
</code></pre></div>
<p>We could also use a class for that:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;elem&quot;</span><span class="p">&gt;</span>Click me<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">class</span><span class="w"> </span><span class="nx">Menu</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">handleEvent</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">switch</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;mousedown&#39;</span><span class="o">:</span>
<span class="w">          </span><span class="nx">elem</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Mouse button pressed&quot;</span><span class="p">;</span>
<span class="w">          </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;mouseup&#39;</span><span class="o">:</span>
<span class="w">          </span><span class="nx">elem</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s2">&quot;...and released.&quot;</span><span class="p">;</span>
<span class="w">          </span><span class="k">break</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">menu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Menu</span><span class="p">();</span>
<span class="w">  </span><span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;mousedown&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">menu</span><span class="p">);</span>
<span class="w">  </span><span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;mouseup&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">menu</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
<p>Here the same object handles both events. Please note that we need to explicitly setup the events to listen using <code class="highlight"><span class="nx">addEventListener</span></code>. The <code class="highlight"><span class="nx">menu</span></code> object only gets <code>mousedown</code> and <code>mouseup</code> here, not any other types of events.</p>
<p>The method <code class="highlight"><span class="nx">handleEvent</span></code> does not have to do all the job by itself. It can call other event-specific methods instead, like this:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;elem&quot;</span><span class="p">&gt;</span>Click me<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">class</span><span class="w"> </span><span class="nx">Menu</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">handleEvent</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// mousedown -&gt; onMousedown OR mouseup -&gt; onMouseup, etc.</span>
<span class="w">      </span><span class="kd">let</span><span class="w"> </span><span class="nx">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;on&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">type</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">toUpperCase</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">type</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span>
<span class="w">      </span><span class="c1">// call one of the methods that defined below(onMousedown() OR onMouseup(), etc.)</span>
<span class="w">      </span><span class="k">this</span><span class="p">[</span><span class="nx">method</span><span class="p">]();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">onMousedown</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">elem</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Mouse button pressed&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">onMouseup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">elem</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s2">&quot;...and released.&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// Now event handlers are clearly separated, that may be easier to support.</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">menu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Menu</span><span class="p">();</span>
<span class="w">  </span><span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;mousedown&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">menu</span><span class="p">);</span>
<span class="w">  </span><span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;mouseup&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">menu</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
</li>
</ol>
<h3 id="event-object">Event object</h3>
<p>No matter how you assign the handler – it gets an <em>event object</em> as the first argument. That object contains the details about what’s happened.</p>
<p>Here’s an example of getting pointer coordinates from the event object:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Click me&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;elem&quot;</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="nx">elem</span><span class="p">.</span><span class="nx">onclick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// show event type, element and coordinates of the click</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">type</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot; at &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">);</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Coordinates: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">clientX</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;:&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">clientY</span><span class="p">);</span>
<span class="w">  </span><span class="p">};</span>
<span class="w">  </span><span class="c1">// &#39;event.type&#39; - Event type, here it’s &quot;click&quot;.</span>
<span class="w">  </span><span class="cm">/* &#39;event.currentTarget&#39; - Element that handled the event. That’s exactly the same as &#39;this&#39;,</span>
<span class="cm">  unless the handler is an arrow function, or its &#39;this&#39; is bound(using &#39;bind&#39;) to something else,</span>
<span class="cm">  then we can get the element from &#39;event.currentTarget&#39;. */</span>
<span class="w">  </span><span class="c1">// &#39;event.clientX / event.clientY&#39; - Window-relative coordinates of the cursor, for pointer events.</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">The event object is also available in HTML handlers.</p>
<div class="highlight"><pre><span></span><code><span class="o">&lt;</span><span class="nx">input</span><span class="w"> </span><span class="nx">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span><span class="w"> </span><span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;alert(event.type)&quot;</span><span class="w"> </span><span class="nx">value</span><span class="o">=</span><span class="s2">&quot;Event type&quot;</span><span class="o">&gt;</span>
</code></pre></div>
<p>That’s possible because when the browser reads the attribute, it creates a handler like this: <code class="highlight"><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span><span class="w"> </span><span class="p">}</span></code>. That is: its first argument is called <code>event</code>, and the body is taken from the attribute.</p>
</div>
<h3 id="bubbling-and-capturing">Bubbling and capturing</h3>
<p>Всплытие и погружение</p>
<p>When an event happens – the most nested element where it happens gets labeled as the “target element” (<code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">target</span></code>). Then:</p>
<ul>
<li>
<p><strong>Phase 1 - Capturing:</strong> the event moves down from the <code>document</code> root to <code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">target</span></code>, <ins>calling handlers</ins> assigned with <code>addEventListener(..., true)</code> on the way (<code>true</code> is a shorthand for <code>{capture: true}</code>).</p>
<div class="admonition note">
<p class="admonition-title"><em>Capture</em> phase is <em>invisible</em> for handlers and they only run on the 2nd and 3rd phases when:</p>
<p>they added using <code>on&lt;event&gt;</code>-property or using HTML attributes or using two-argument <code class="highlight"><span class="nx">addEventListener</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span><span class="w"> </span><span class="nx">handler</span><span class="p">)</span></code></p>
</div>
<div class="admonition note">
<p class="admonition-title">The <em>capturing phase</em> is used very rarely.</p>
<p>Usually we handle events on <em>bubbling</em>.</p>
</div>
</li>
<li>
<p><strong>Phase 2 - Target:</strong> handlers(on both <em>capturing</em> and <em>bubbling</em> phases, i.e. this phase is <ins>not handled separately</ins>) are called on the target element itself.</p>
</li>
<li>
<p><strong>Phase 3 - Bubbling:</strong> the event bubbles up from <code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">target</span></code> to the root (till the <code>document</code> object, and some events even reach <code>window</code>), <ins>calling handlers</ins> assigned using <code>on&lt;event&gt;</code>, HTML attributes and <code>addEventListener</code> without the 3rd argument or with the 3rd argument <code>false/{capture:false}</code>.</p>
<p><strong>Almost</strong> all events <em>bubble</em>. Here the list of those that don't:</p>
<ul>
<li><code>focus</code> event</li>
</ul>
</li>
</ul>
<p>Example of both <em>capturing</em> and <em>bubbling</em> in action:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="w">  </span><span class="nt">body</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="kc">blue</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">form</span><span class="p">&gt;</span>FORM
  <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>DIV
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>P<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="k">for</span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">elem</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="sb">`Capturing: </span><span class="si">${</span><span class="nx">elem</span><span class="p">.</span><span class="nx">tagName</span><span class="si">}</span><span class="sb">`</span><span class="p">),</span><span class="w"> </span><span class="kc">true</span><span class="p">);</span>
<span class="w">    </span><span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="sb">`Bubbling: </span><span class="si">${</span><span class="nx">elem</span><span class="p">.</span><span class="nx">tagName</span><span class="si">}</span><span class="sb">`</span><span class="p">));</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
<p>The code sets click handlers on every element in the document to see which ones are working.</p>
<p>If you click on <code class="highlight"><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span></code>, then the sequence is:</p>
<ol>
<li><code>HTML</code> → <code>BODY</code> → <code>FORM</code> → <code>DIV</code> → <code>P</code> (<em>capturing phase</em>, the first listener):</li>
<li><code>P</code> → <code>DIV</code> → <code>FORM</code> → <code>BODY</code> → <code>HTML</code> (<em>bubbling phase</em>, the second listener).</li>
</ol>
<p>Please note, the <code>P</code> shows up twice, because we’ve set two listeners: <em>capturing</em> and <em>bubbling</em>. The target triggers at the end of the first and at the beginning of the second phase.</p>
<div class="admonition note">
<p class="admonition-title">Listeners on same element and same phase run in their set order.</p>
<p>If we have multiple event handlers on the same phase, assigned to the same element with <code>addEventListener</code>, they run in the same order as they are created:</p>
<div class="highlight"><pre><span></span><code><span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="mf">1</span><span class="p">));</span><span class="w"> </span><span class="c1">// guaranteed to trigger first</span>
<span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="mf">2</span><span class="p">));</span>
</code></pre></div>
</div>
<p>Each handler can access <em>event object</em> properties:</p>
<ul>
<li><code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">target</span></code> – the deepest element that originated the event.</li>
<li><code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span></code>(=<code>this</code>) – the current element that handles the event(the one that has the handler on it)</li>
<li><code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">eventPhase</span></code> – the current phase (capturing=1, target=2, bubbling=3). It’s rarely used, because we usually know it in the handler.</li>
</ul>
<p>Any event handler can <strong>stop</strong> the event capturing/bubbling by calling:</p>
<ul>
<li>
<p><code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">()</span></code> - for a single handler of that event</p>
<p>That is if an element has multiple event handlers on a single event, then even if one of them stops the capturing/bubbling, the other ones still execute.</br>
In other words, <code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">()</span></code> <ins>stops the move downwards/upwards</ins>, but on the <strong>current element</strong> <ins>all other</ins> handlers will run.</p>
</li>
<li>
<p><code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">stopImmediatePropagation</span><span class="p">()</span></code> - for a multiple handlers of that event</p>
<p>This method <ins>stops the capturing/bubbling</ins> and prevents <ins>handlers</ins> on the <strong>current element</strong> from running. After it no other handlers execute.</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- here &#39;body.onclick&#39; doesn’t work if you click on &lt;button&gt; --&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;alert(`the bubbling doesn&#39;t reach here`)&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;event.stopPropagation()&quot;</span><span class="p">&gt;</span>Click me<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">The <code>event.stop[Immediate]Propagation()</code> during the <em>capturing</em> also prevents the <em>bubbling</em>.</p>
<p>In other words, normally the event goes first down (“capturing”) and then up (“bubbling”). But if <code>event.stop[Immediate]Propagation()</code> is called during the <em>capturing phase</em>, then the event travel stops, no <em>bubbling</em> will occur.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Don’t stop bubbling without a need!</p>
<p>Bubbling is convenient. Don’t stop it without a real need: obvious and architecturally well thought out.</br>
Всплытие – это удобно. Не прекращайте его без явной нужды, очевидной и архитектурно прозрачной.</p>
<p>Sometimes <code>event.stopPropagation()</code> creates hidden pitfalls that later may become problems.</p>
<p>For instance:</p>
<ol>
<li>We create a nested menu. Each submenu handles clicks on its elements and calls <code>stopPropagation</code> so that the outer menu won’t trigger.</li>
<li>Later we decide to catch clicks on the whole window, to track users’ behavior (where people click). Some analytic systems do that. Usually the code uses <code class="highlight"><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="err">…</span><span class="p">)</span></code> to catch all clicks.</li>
<li>Our analytic won’t work over the area where clicks are stopped by <code>stopPropagation</code>. Sadly, we’ve got a “dead zone”.</li>
</ol>
<p>There’s usually no real need to prevent the bubbling. A task that seemingly requires that may be solved by other means. One of them is to use custom events, we’ll cover them later. Also we can write our data into the <code>event</code> object in one handler and read it in another one, so we can pass to handlers on parents information about the processing below.</p>
</div>
<p>Bubbling and capturing lay the foundation for “event delegation” – an extremely powerful event handling pattern.</p>
<h3 id="event-delegation">Event delegation</h3>
<p><em>Event delegation</em> is of the most powerful event handling patterns.</p>
<p>It’s often used to add the <ins>same handling for many similar elements</ins>, but not only for that.</p>
<blockquote>
<p><ins>same handling for many similar elements</ins> - if we have a lot of elements handled in a similar way, then instead of assigning a handler to each of them – we put a single handler on their common ancestor.</p>
</blockquote>
<p>The algorithm:</p>
<ol>
<li>Put a single handler on the container.</li>
<li>In the handler – check the source element <code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">target</span></code>.</li>
<li>If the event happened inside an element that interests us, then handle the event.</li>
</ol>
<p>Benefits:</p>
<ul>
<li>Simplifies initialization and saves memory: no need to add many handlers.</li>
<li>Less code: when adding or removing elements, no need to add/remove handlers.</li>
<li>DOM modifications: we can mass add/remove elements with <code>innerHTML</code> and the like.</li>
</ul>
<p>Limitations:</p>
<ul>
<li>The event <strong>must be bubbling</strong>. Some events do not bubble.</li>
<li>Low-level handlers should not use <code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">()</span></code>.</li>
<li>The delegation may add CPU load, because the container-level handler reacts on events in any place of the container, no matter whether they interest us or not. But usually the <ins>load is negligible</ins>, so <strong>we don’t take it into account</strong>.</li>
</ul>
<h4 id="delegation-examples">Delegation examples</h4>
<h5 id="basic-example-highlight-a-cell-td-on-click">basic example: highlight a cell <code>&lt;td&gt;</code> on click</h5>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;!DOCTYPE HTML&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">#</span><span class="nn">bagua-table</span><span class="w"> </span><span class="nt">th</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">text-align</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span>
<span class="w">      </span><span class="k">font-weight</span><span class="p">:</span><span class="w"> </span><span class="kc">bold</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">bagua-table</span><span class="w"> </span><span class="nt">td</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="kt">px</span><span class="p">;</span>
<span class="w">      </span><span class="k">white-space</span><span class="p">:</span><span class="w"> </span><span class="kc">nowrap</span><span class="p">;</span>
<span class="w">      </span><span class="k">text-align</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span>
<span class="w">      </span><span class="k">vertical-align</span><span class="p">:</span><span class="w"> </span><span class="kc">bottom</span><span class="p">;</span>
<span class="w">      </span><span class="k">padding-top</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
<span class="w">      </span><span class="k">padding-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">bagua-table</span><span class="w"> </span><span class="p">.</span><span class="nc">nw</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#999</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">bagua-table</span><span class="w"> </span><span class="p">.</span><span class="nc">n</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#03f</span><span class="p">;</span>
<span class="w">      </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#fff</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">bagua-table</span><span class="w"> </span><span class="p">.</span><span class="nc">ne</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#ff6</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">bagua-table</span><span class="w"> </span><span class="p">.</span><span class="nc">w</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#ff0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">bagua-table</span><span class="w"> </span><span class="p">.</span><span class="nc">c</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#60c</span><span class="p">;</span>
<span class="w">      </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#fff</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">bagua-table</span><span class="w"> </span><span class="p">.</span><span class="nc">e</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#09f</span><span class="p">;</span>
<span class="w">      </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#fff</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">bagua-table</span><span class="w"> </span><span class="p">.</span><span class="nc">sw</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#963</span><span class="p">;</span>
<span class="w">      </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#fff</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">bagua-table</span><span class="w"> </span><span class="p">.</span><span class="nc">s</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#f60</span><span class="p">;</span>
<span class="w">      </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#fff</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">bagua-table</span><span class="w"> </span><span class="p">.</span><span class="nc">se</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#0c3</span><span class="p">;</span>
<span class="w">      </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#fff</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">bagua-table</span><span class="w"> </span><span class="p">.</span><span class="nc">highlight</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="kc">red</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">table</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;bagua-table&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">th</span> <span class="na">colspan</span><span class="o">=</span><span class="s">&quot;3&quot;</span><span class="p">&gt;&lt;</span><span class="nt">em</span><span class="p">&gt;</span>Bagua<span class="p">&lt;/</span><span class="nt">em</span><span class="p">&gt;</span> Chart: Direction, Element, Color, Meaning<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nw&quot;</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Northwest<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Metal
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Silver
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Elders
      <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;n&quot;</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>North<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Water
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Blue
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Change
      <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;ne&quot;</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Northeast<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Earth
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Yellow
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Direction
      <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;w&quot;</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>West<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Metal
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Gold
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Youth
      <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;c&quot;</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Center<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>All
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Purple
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Harmony
      <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;e&quot;</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>East<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Wood
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Blue
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Future
      <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;sw&quot;</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Southwest<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Earth
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Brown
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Tranquility
      <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;s&quot;</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>South<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Fire
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Orange
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Fame
      <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;se&quot;</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Southeast<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Wood
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Green
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Romance
      <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>

  <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;bagua-table&#39;</span><span class="p">);</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">selectedTd</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// code for basic explanation, see after this codeblock</span>
<span class="w">    </span><span class="nx">table</span><span class="p">.</span><span class="nx">onclick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">let</span><span class="w"> </span><span class="nx">td</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="s1">&#39;td&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// (1)</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">td</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span><span class="w"> </span><span class="c1">// (2)</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">table</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">td</span><span class="p">))</span><span class="w"> </span><span class="k">return</span><span class="p">;</span><span class="w"> </span><span class="c1">// (3)</span>
<span class="w">      </span><span class="nx">highlight</span><span class="p">(</span><span class="nx">td</span><span class="p">);</span><span class="w"> </span><span class="c1">// (4)</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="c1">// more advaced code that do the same as &#39;table.oncklick = ...&#39; block above</span>
<span class="w">    </span><span class="nx">table</span><span class="p">.</span><span class="nx">onclick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">let</span><span class="w"> </span><span class="nx">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">;</span><span class="w"> </span><span class="c1">// where was the click?</span>
<span class="w">      </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nx">target</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">this</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">target</span><span class="p">.</span><span class="nx">tagName</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;TD&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">highlight</span><span class="p">(</span><span class="nx">target</span><span class="p">);</span><span class="w"> </span><span class="c1">// highlight it</span>
<span class="w">          </span><span class="k">return</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="c1">// while we are not on &#39;TD&#39; we &quot;level up&quot; our target variable</span>
<span class="w">        </span><span class="c1">// to the next &#39;parentNode&#39; until it reaches &#39;TD&#39; node</span>
<span class="w">        </span><span class="nx">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">target</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">function</span><span class="w"> </span><span class="nx">highlight</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">selectedTd</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// remove the existing highlight if any</span>
<span class="w">        </span><span class="nx">selectedTd</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;highlight&#39;</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="nx">selectedTd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">node</span><span class="p">;</span>
<span class="w">      </span><span class="nx">selectedTd</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;highlight&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// highlight the new td</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>
<ol>
<li>The method <strong><em>element</em>.closest(selector)</strong> returns the nearest ancestor that matches the selector. In our case we look for <code class="highlight"><span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span></code> on the way up from the source element.</li>
<li>If <code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">target</span></code> is not inside any <code class="highlight"><span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span></code>, then the call returns immediately, as there’s nothing to do.</li>
<li>In case of nested tables, <code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">target</span></code> may be a <code class="highlight"><span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span></code>, but lying outside of the current table. So we check if that’s actually <strong>our table’s</strong> <code class="highlight"><span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span></code>.</li>
<li>And, if it’s so, then highlight it.</li>
</ol>
<p>As the result, we have a fast, efficient highlighting code, that doesn’t care about the total number of <code class="highlight"><span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span></code> in the table.</p>
<h5 id="actions-in-markup">actions in markup</h5>
<p>действия в разметке</p>
<p>Let’s say, we want to make a menu with buttons “Save”, “Load”, “Search” and so on. And there’s an object with methods <code>save</code>, <code>load</code>, <code>search</code>… How to match them?</br>
The first idea may be to assign a separate handler to each button. But there’s a more elegant solution. We can add a handler for the whole menu and <code>data-action</code> attributes for buttons that has the method to call.</br>
The handler reads the attribute and executes the method.</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;menu&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">button</span> <span class="na">data-action</span><span class="o">=</span><span class="s">&quot;save&quot;</span><span class="p">&gt;</span>Save<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">button</span> <span class="na">data-action</span><span class="o">=</span><span class="s">&quot;load&quot;</span><span class="p">&gt;</span>Load<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">button</span> <span class="na">data-action</span><span class="o">=</span><span class="s">&quot;search&quot;</span><span class="p">&gt;</span>Search<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">class</span><span class="w"> </span><span class="nx">Menu</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">elem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">_elem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">elem</span><span class="p">;</span><span class="w"> </span><span class="c1">// underscore in &#39;_this.elem&#39; is a naming convention for private vatiables</span>
<span class="w">      </span><span class="nx">elem</span><span class="p">.</span><span class="nx">onclick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">onClick</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span><span class="w"> </span><span class="c1">// (*)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">save</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;saving&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">load</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;loading&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">search</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;searching&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">onClick</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">let</span><span class="w"> </span><span class="nx">action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">action</span><span class="p">;</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">action</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">[</span><span class="nx">action</span><span class="p">]();</span><span class="w"> </span><span class="c1">// (**)</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="ow">new</span><span class="w"> </span><span class="nx">Menu</span><span class="p">(</span><span class="nx">menu</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
<p>Please note that <code class="highlight"><span class="k">this</span><span class="p">.</span><span class="nx">onClick</span></code> is bound to <code class="highlight"><span class="k">this</span></code> in <code>(*)</code>. That’s important, because otherwise <code class="highlight"><span class="k">this</span></code> inside it would reference the DOM element(<code class="highlight"><span class="nx">elem</span></code>), not the <code class="highlight"><span class="nx">Menu</span></code> object, and <code class="highlight"><span class="k">this</span><span class="p">[</span><span class="nx">action</span><span class="p">]</span></code> in (**) would not be what we need.</p>
<p>So, what advantages does delegation give us here?</p>
<ul>
<li>We don’t need to write the code to assign a handler to each button. Just make a method and put it in the markup.</li>
<li>The HTML structure is flexible, we can add/remove buttons at any time.</li>
</ul>
<p>We could also use classes <code class="highlight"><span class="p">.</span><span class="nc">action-save</span></code>, <code class="highlight"><span class="p">.</span><span class="nc">action-load</span></code>, but an attribute <code>data-action</code> is better semantically. And we can use it in CSS rules too.</p>
<h4 id="the-behavior-pattern">The “behavior” pattern</h4>
<p>We can also use event delegation to add “behaviors” to elements <strong>declaratively</strong>, with special attributes and classes.</p>
<p>The pattern has two parts:</p>
<ol>
<li>We add a custom attribute to an element that describes its behavior.</li>
<li>A <ins>document-wide</ins> handler tracks events, and if an event happens on an attributed element – performs the action.</li>
</ol>
<p>The “behavior” pattern can be an alternative to mini-fragments of JavaScript.</p>
<h5 id="example-counter">example: counter</h5>
<p>Here the attribute <code>data-counter</code> adds a behavior: “increase value on click” to buttons:</p>
<div class="highlight"><pre><span></span><code>Counter: <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;1&quot;</span> <span class="na">data-counter</span><span class="p">&gt;</span>
One more counter: <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2&quot;</span> <span class="na">data-counter</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">counter</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">undefined</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// if the attribute exists...</span>
<span class="w">      </span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="o">++</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">  </span><span class="p">});</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
<p>If we click a button – its value is increased. Not buttons, but the general approach is important here.</br>
There can be as many attributes with <code>data-counter</code> as we want. We can add new ones to HTML at any moment. Using the <em>event delegation</em> we “extended” HTML, added an attribute that describes a new behavior.</p>
<div class="admonition warning">
<p class="admonition-title">For document-level handlers – always use <code class="highlight"><span class="nx">addEventListener</span></code>.</p>
<p>When we assign an event handler to the <code>document</code> object, we should always use <code class="highlight"><span class="nx">addEventListener</span></code>, not <code class="highlight"><span class="nb">document</span><span class="p">.</span><span class="nx">on</span><span class="o">&lt;</span><span class="nx">event</span><span class="o">&gt;</span></code>, because the latter will cause conflicts: new handlers overwrite old ones.</br>
For real projects it’s normal that there are many handlers on document set by different parts of the code.</p>
</div>
<h5 id="example-toggler">example: toggler</h5>
<p>A click on an element with the attribute <code>data-toggle-id</code> will show/hide the element with the given <code>id</code>:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">button</span> <span class="na">data-toggle-id</span><span class="o">=</span><span class="s">&quot;subscribe-mail&quot;</span><span class="p">&gt;</span>
  Show the subscription form
<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">form</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;subscribe-mail&quot;</span> <span class="na">hidden</span><span class="p">&gt;</span>
  Your mail: <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;email&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">toggleId</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">id</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">elem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>

<span class="w">    </span><span class="nx">elem</span><span class="p">.</span><span class="nx">hidden</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">hidden</span><span class="p">;</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
<p>Now, to add toggling functionality to an element no need to write JavaScript for every such element. Just use the behavior, i.e. the attribute <code>data-toggle-id</code>. The <ins>document-level</ins> handler makes it work for any element of the page.</br>
We can combine multiple behaviors on a single element as well.</p>
<h3 id="browser-default-actions">Browser default actions</h3>
<p>There are many default browser actions:</p>
<ul>
<li><code>mousedown</code> – starts the selection (move the mouse to select).</li>
<li><code>click</code> on <code class="highlight"><span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span><span class="p">&gt;</span></code> – checks/unchecks the input.</li>
<li><code>contextmenu</code> – the event happens on a right-click, the action is to show the browser context menu.</li>
<li><code>submit</code> – clicking an <code class="highlight"><span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span><span class="p">&gt;</span></code> or hitting <span class="keys"><kbd class="key-enter">Enter</kbd></span> inside a form field causes this event to happen, and the browser submits the form after it.</li>
<li><code>keydown</code> – pressing a key may lead to adding a character into a field, or other actions.</li>
<li>…there are more…</li>
</ul>
<h4 id="preventing-browser-actions">Preventing browser actions</h4>
<p>All the default actions can be prevented if we want to handle the event exclusively by JavaScript.</p>
<p>To prevent a default action:</p>
<ul>
<li>
<p><code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span></code> - this is the main way</p>
</li>
<li>
<p><code class="highlight"><span class="k">return</span><span class="w"> </span><span class="kc">false</span></code> - this way works only for handlers assigned with <code>on&lt;event&gt;</code> element method</p>
<div class="admonition note">
<p class="admonition-title"><code class="highlight"><span class="k">return</span><span class="w"> </span><span class="kc">false</span></code> is an exception.</p>
<p>The value returned by an event handler is usually ignored.</p>
<p>The only exception is <code class="highlight"><span class="k">return</span><span class="w"> </span><span class="kc">false</span></code> from a handler assigned using <code>on&lt;event&gt;</code>.</p>
<p>In all other cases, <code class="highlight"><span class="k">return</span></code> value is ignored. In particular, there’s no sense in returning <code>true</code>.</p>
</div>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- a click on a link doesn’t lead to navigation; the browser doesn’t do anything --&gt;</span>
<span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;return false&quot;</span><span class="p">&gt;</span>Click here<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
or
<span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;event.preventDefault()&quot;</span><span class="p">&gt;</span>here<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Follow-up events.</p>
<p>Certain events flow one into another. If we prevent the first event, there will be no second.</p>
<p>For instance, <code>mousedown</code> on an <code class="highlight"><span class="p">&lt;</span><span class="nt">input</span><span class="p">&gt;</span></code> field leads to focusing in it, and the <code>focus</code> event. If we prevent the <code>mousedown</code> event, there’s no focus.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Stay semantic, don’t abuse. Сохраняйте семантику, не злоупотребляйте.</p>
<p>Technically, by preventing default actions and adding JavaScript we can customize the behavior of any elements. For instance, we can make a link <code class="highlight"><span class="p">&lt;</span><span class="nt">a</span><span class="p">&gt;</span></code> work like a button, and a button <code class="highlight"><span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span></code> behave as a link (redirect to another URL or so).</p>
<p>But we should generally keep the semantic meaning of HTML elements. For instance, <code class="highlight"><span class="p">&lt;</span><span class="nt">a</span><span class="p">&gt;</span></code> should perform navigation, not a button.</p>
<p>Besides being “just a good thing”, that makes your HTML better in terms of accessibility.</p>
<p>Also if we consider the example with <code class="highlight"><span class="p">&lt;</span><span class="nt">a</span><span class="p">&gt;</span></code>, then please note: a browser allows us to open such links in a new window (by right-clicking them and other means). And people like that. But if we make a button behave as a link using JavaScript and even look like a link using CSS, then <code class="highlight"><span class="p">&lt;</span><span class="nt">a</span><span class="p">&gt;</span></code>-specific browser features still won’t work for it.</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">input</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Focus works&quot;</span> <span class="na">onfocus</span><span class="o">=</span><span class="s">&quot;this.value=&#39;&#39;&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">onmousedown</span><span class="o">=</span><span class="s">&quot;return false&quot;</span> <span class="na">onfocus</span><span class="o">=</span><span class="s">&quot;this.value=&#39;&#39;&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Click me&quot;</span><span class="p">&gt;</span>
</code></pre></div>
</div>
<p>If the default action was prevented, the value of <code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">defaultPrevented</span></code> becomes <code>true</code>, otherwise it’s <code>false</code>.</p>
<p>Sometimes we can use <code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">defaultPrevented</span></code> instead of using <code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">()</span></code>, to signal other event handlers that the event was handled.</p>
<p>Example: Preventing default actions of <code>contextmenu</code> for <code class="highlight"><span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span></code> element and also for whole <code>document</code>. The problem is that when we click on elem, we get two menus: the button-level and (the event bubbles up) the document-level menu. Here is the solution:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Right-click for the document menu (added a check for event.defaultPrevented)<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;elem&quot;</span><span class="p">&gt;</span>Right-click for the button menu<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="nx">elem</span><span class="p">.</span><span class="nx">oncontextmenu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Button context menu&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="nb">document</span><span class="p">.</span><span class="nx">oncontextmenu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// solution: check if the default action was prevented?</span>
<span class="w">    </span><span class="c1">// If it is so, then the event was handled, and we don’t need to react on it.</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">defaultPrevented</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span>

<span class="w">    </span><span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Document context menu&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">};</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
<p>If we have nested elements, and each of them has a context menu of its own, that would also work. Just make sure to check for <code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">defaultPrevented</span></code> in each <code>contextmenu</code> handler.</p>
<h3 id="dispatching-custom-eventstodo">Dispatching custom events(TODO)</h3>
<p>Генерация пользовательских событий</p>
<p>TODO: <a href="https://javascript.info/dispatch-events" target="_blank">https://javascript.info/dispatch-events</a></p>
<h2 id="ui-events">UI Events</h2>
<h3 id="mouse-events">Mouse events</h3>
<div class="admonition note">
<p class="admonition-title">Such events may come not only from “mouse devices”.</p>
<p>But are also from other devices, such as phones and tablets, where they are emulated for compatibility.</p>
</div>
<p>Mouse event types:</p>
<ol>
<li>
<p>Simple events:</p>
<ul>
<li><code>mousedown/mouseup</code> - Mouse button is clicked/released over an element.</li>
<li>
<p><code>mouseover/mouseout</code> - Mouse pointer comes over/out from an element.</br>
    They trigger even when we go from the parent element to a child element.</br>
    The browser assumes that the mouse can be only over one element at one time – the deepest one.</br>
    See more on <a href="#mouseoverout"><mark>mouseover/out</mark></a> point.</p>
</li>
<li>
<p><code>mouseenter/mouseleave</code> - Mouse pointer enters/leaves the element.</br>
    They only trigger when the mouse comes in and out the element <ins>as a whole</ins>.</br>
    Also they do not bubble.</br>
    See more on <a href="#mouseenterleave"><mark>mouseenter/leave</mark></a> point.</p>
</li>
<li>
<p><code>mousemove</code> - Every mouse move over an element triggers that event.</p>
<div class="admonition note">
<p class="admonition-title">A fast mouse move may skip intermediate elements.</p>
<p><code>mousemove</code> <strong>doesn't</strong> trigger on every pixel. The browser checks the mouse position from time to time.</br>
That means that if the visitor is moving the mouse very fast then some DOM-elements may be skipped.</p>
<p>That’s good for performance, because there may be many intermediate elements. We don’t really want to process in and out of each one.</p>
</div>
</li>
<li>
<p><code>contextmenu</code> - Triggers when the <strong>right mouse</strong> button is pressed. There are other ways to open a context menu, e.g. using a special keyboard key, it triggers in that case also, so it’s not exactly the mouse event.</p>
</li>
</ul>
</li>
<li>
<p>Complex events(consist of several simple events):</p>
<ul>
<li><code>click</code> - Triggers after <code>mousedown</code> and then <code>mouseup</code> over the same element if the <strong>left mouse</strong> button was used.</li>
<li><code>dblclick</code> - Triggers after two clicks on the same element within a short timeframe. Rarely used nowadays.</li>
</ul>
</li>
</ol>
<h4 id="mouse-event-properties">Mouse event properties</h4>
<h5 id="mouse-button">mouse button</h5>
<ul>
<li>
<p><strong>event.button</strong> - returns the exact mouse button</p>
<p>Has following possible values:</p>
<ul>
<li><code>0</code> - Left button (primary)</li>
<li><code>1</code> - Middle button (auxiliary)</li>
<li><code>2</code> - Right button (secondary)</li>
<li><code>3</code> - X1 button (back)</li>
<li><code>4</code> - X2 button (forward)</li>
</ul>
</li>
<li>
<p><strong>event.buttons</strong> - return all currently pressed buttons as an integer, one bit per button.</br>
  In practice this property is very rarely used, you can find details at <a href="https://developer.mozilla.org/en-US/docs/Web/api/MouseEvent/buttons" target="_blank">MDN</a> if you ever need it.</p>
</li>
<li>
<p><strong>event.which</strong> - DEPRECATED! An old non-standard way of getting a button, with possible values:</p>
<ul>
<li><code>event.which == 1</code> – Left button,</li>
<li><code>event.which == 2</code> – Middle button,</li>
<li><code>event.which == 3</code> – Right button.</li>
</ul>
</li>
</ul>
<h5 id="modifiers-shift-alt-ctrl-and-meta">modifiers: shift, alt, ctrl and meta</h5>
<ul>
<li><code>shiftKey</code>: <span class="keys"><kbd class="key-shift">Shift</kbd></span></li>
<li><code>altKey</code>: <span class="keys"><kbd class="key-alt">Alt</kbd></span> (or <span class="keys"><kbd class="key-option">Option</kbd></span> for Mac)</li>
<li><code>ctrlKey</code>: <span class="keys"><kbd class="key-control">Ctrl</kbd></span></li>
<li><code>metaKey</code>: <span class="keys"><kbd class="key-command">Cmd</kbd></span> for Mac</li>
</ul>
<p>They are <code>true</code> if the corresponding key was pressed during the event.</p>
<p>For instance, the button below only works on <span class="keys"><kbd class="key-alt">Alt</kbd><span>+</span><kbd class="key-shift">Shift</kbd></span>+ click:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;button&quot;</span><span class="p">&gt;</span>Alt+Shift+Click on me!<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="nx">button</span><span class="p">.</span><span class="nx">onclick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">altKey</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">shiftKey</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Hooray!&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">};</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Attention: on Mac it’s usually <span class="keys"><kbd class="key-command">Cmd</kbd></span> instead of <span class="keys"><kbd class="key-control">Ctrl</kbd></span>.</p>
<p>Even if we’d like to force Mac users to <span class="keys"><kbd class="key-control">Ctrl</kbd></span>+click – that’s kind of difficult. The problem is: a left-click with <span class="keys"><kbd class="key-control">Ctrl</kbd></span> is interpreted as a <em>right-click</em> on MacOS, and it generates the contextmenu event, not <code>click</code> like Windows/Linux.</p>
<p>So if we want users of all operating systems to feel comfortable, then together with <code>ctrlKey</code> we should check <code>metaKey</code>.</p>
<p>For JS-code it means that we should check <code class="highlight"><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">metaKey</span><span class="p">)</span></code>.</p>
</div>
<h5 id="coordinates">coordinates</h5>
<p>All mouse events provide coordinates in two flavours:</p>
<ol>
<li>
<p>Window-relative: <code>clientX</code> and <code>clientY</code>.</p>
<p>Are counted from the <ins>current</ins> window left-upper corner. When the page is scrolled, they change.</p>
<p>For instance, if we have a window of the size 500x500, and the mouse is in the left-upper corner, then <code>clientX</code> and <code>clientY</code> are <code>0</code>, no matter how the page is scrolled.</br>
And if the mouse is in the center, then <code>clientX</code> and <code>clientY</code> are <code>250</code>, no matter what place in the document it is. They are similar to <code class="highlight"><span class="nt">position</span><span class="p">:</span><span class="nd">fixed</span></code> in that aspect.</br>
Move the mouse over the input field to see <code>clientX/clientY</code> (the example is in the <code>iframe</code>, so coordinates are relative to that <code>iframe</code>):</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">input</span> <span class="na">onmousemove</span><span class="o">=</span><span class="s">&quot;this.value=event.clientX+&#39;:&#39;+event.clientY&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Mouse over me&quot;</span><span class="p">&gt;</span>
</code></pre></div>
</li>
<li>
<p>Document-relative: <code>pageX</code> and <code>pageY</code>.</p>
<p>Are counted from the left-upper corner <ins>of the document</ins>, and do not change when the page is scrolled.</p>
</li>
</ol>
<h4 id="preventing-selection-on-mousedown">Preventing selection on <code>mousedown</code></h4>
<p>Selection cases:</p>
<ol>
<li>
<p><strong>Left mouse holding pressing and moving:</strong> makes the selection, often unwanted.</br>
TODO: There are multiple ways to prevent the selection, that you can read in <a href="https://javascript.info/selection-range" target="_blank">https://javascript.info/selection-range</a>.</p>
</li>
<li>
<p><strong>Double mouse click:</strong> has a side effect that may be disturbing in some interfaces: it selects text.</p>
<p>To prevent selection in this case is to prevent the browser action on <code>mousedown</code>. It prevent first selection case too.</p>
<div class="highlight"><pre><span></span><code>Before...
<span class="p">&lt;</span><span class="nt">b</span> <span class="na">ondblclick</span><span class="o">=</span><span class="s">&quot;alert(&#39;Click!&#39;)&quot;</span> <span class="na">onmousedown</span><span class="o">=</span><span class="s">&quot;return false&quot;</span><span class="p">&gt;</span>
  Double-click me
<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;</span>
...After
</code></pre></div>
<p>Now the bold element is not selected on double clicks, and pressing the left button on it won’t start the selection.</br>
The text inside it is still selectable. However, the selection should start not on the text itself, but before or after it. Usually that’s fine for users.</p>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Preventing copying.</p>
<p>If we want to disable selection to protect our page content from copy-pasting, then we can use another event: <code>oncopy</code>.</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">oncopy</span><span class="o">=</span><span class="s">&quot;alert(&#39;Copying forbidden!&#39;);return false&quot;</span><span class="p">&gt;</span>
  Dear user,
  The copying is forbidden for you.
  If you know JS or HTML, then you can get everything from the page source though.
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
</div>
<h4 id="moving-the-mouse">Moving the mouse</h4>
<h5 id="mouseoverout">mouseover/out</h5>
<p>The <code>mouseover</code> event occurs when a mouse pointer comes over an element, and <code>mouseout</code> – when it leaves.</p>
<div class="admonition note">
<p class="admonition-title">If <code>mouseover</code> triggered, there must be <code>mouseout</code>.</p>
<p>In case of fast mouse movements, intermediate elements may be ignored, but one thing we know for sure: if the pointer “officially” entered an element (<code>mouseover</code> event generated), then upon leaving it we always get <code>mouseout</code>.</p>
</div>
<p>These event have special property <code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">relatedTarget</span></code></p>
<p>For <code>mouseover</code>:</p>
<ul>
<li><code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">target</span></code> – is the element <ins>where</ins> the mouse came over.</li>
<li><code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">relatedTarget</span></code> – is the element <ins>from which</ins> the mouse came (<code>relatedTarget</code> → <code>target</code>).</li>
</ul>
<p>For <code>mouseout</code> the reverse:</p>
<ul>
<li><code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">target</span></code> – is the element that the mouse <ins>left</ins>.</li>
<li><code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">relatedTarget</span></code> – is the new under-the-pointer element, that mouse <ins>left for</ins> (<code>target</code> → <code>relatedTarget</code>).</li>
</ul>
<div class="admonition note">
<p class="admonition-title"><code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">relatedTarget</span></code> can be null.</p>
<p>That’s normal and just means that the mouse came not from another element, but from out of the window. Or that it left the window.</br>
If we access <code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">relatedTarget</span><span class="p">.</span><span class="nx">tagName</span></code>, then there will be an error.</p>
</div>
<p><strong><code>mouseout</code> when leaving for a child:</strong></p>
<p>An important feature of <code>mouseout</code> – it triggers, when the pointer moves from an element to its <ins>descendant</ins>(just the same as if it was moving <ins>out of</ins> the parent element itself), e.g. if we’re on <code>#parent</code> and then move the pointer deeper into <code>#child</code>, we get <code>mouseout</code> on <code>#parent</code> in this HTML:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;parent&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;child&quot;</span><span class="p">&gt;</span>...<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
<p>According to the browser logic: <strong>the mouse cursor may be only over a <ins>single</ins> element at any time – the most nested one and top by z-index.</strong> So if it goes to another element (<strong>even a descendant</strong>), then it leaves the previous one.</p>
<p><strong><code>mouseover</code> when leaving for a child:</strong></p>
<p>The <code>mouseover</code> event on a descendant <ins>bubbles up</ins>. So, if <code>#parent</code> has <code>mouseover</code> handler, it triggers.</p>
<p>In the example below moving the mouse from <code>#parent</code> to <code>#child</code>, generates two events on <code>#parent</code>:</p>
<ol>
<li><code>mouseout [target: parent]</code> (left the parent), then</li>
<li><code>mouseover [target: child]</code> (came to the child, bubbled).</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;!doctype html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">#</span><span class="nn">parent</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#99C0C3</span><span class="p">;</span>
<span class="w">      </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">160</span><span class="kt">px</span><span class="p">;</span>
<span class="w">      </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="kt">px</span><span class="p">;</span>
<span class="w">      </span><span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">relative</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">child</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#FFDE99</span><span class="p">;</span>
<span class="w">      </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="kt">%</span><span class="p">;</span>
<span class="w">      </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="kt">%</span><span class="p">;</span>
<span class="w">      </span><span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">absolute</span><span class="p">;</span>
<span class="w">      </span><span class="k">left</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="kt">%</span><span class="p">;</span>
<span class="w">      </span><span class="k">top</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="kt">%</span><span class="p">;</span>
<span class="w">      </span><span class="k">transform</span><span class="p">:</span><span class="w"> </span><span class="nb">translate</span><span class="p">(</span><span class="nv">-50</span><span class="err">%</span><span class="p">,</span><span class="w"> </span><span class="nv">-50</span><span class="err">%</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nt">textarea</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">140</span><span class="kt">px</span><span class="p">;</span>
<span class="w">      </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="kt">px</span><span class="p">;</span>
<span class="w">      </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">block</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;parent&quot;</span> <span class="na">onmouseover</span><span class="o">=</span><span class="s">&quot;mouselog(event)&quot;</span> <span class="na">onmouseout</span><span class="o">=</span><span class="s">&quot;mouselog(event)&quot;</span><span class="p">&gt;</span>parent
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;child&quot;</span><span class="p">&gt;</span>child<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">textarea</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;text&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">textarea</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;text.value=&#39;&#39;&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Clear&quot;</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">    </span><span class="kd">function</span><span class="w"> </span><span class="nx">mouselog</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">let</span><span class="w"> </span><span class="nx">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">();</span>
<span class="w">      </span><span class="nx">text</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">d</span><span class="p">.</span><span class="nx">getHours</span><span class="p">()</span><span class="si">}</span><span class="sb">:</span><span class="si">${</span><span class="nx">d</span><span class="p">.</span><span class="nx">getMinutes</span><span class="p">()</span><span class="si">}</span><span class="sb">:</span><span class="si">${</span><span class="nx">d</span><span class="p">.</span><span class="nx">getSeconds</span><span class="p">()</span><span class="si">}</span><span class="sb"> | </span><span class="si">${</span><span class="nx">event</span><span class="p">.</span><span class="nx">type</span><span class="si">}</span><span class="sb"> [target: </span><span class="si">${</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">]\n`</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/(:|^)(\d\D)/</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;$10$2&#39;</span><span class="p">);</span>
<span class="w">      </span><span class="nx">text</span><span class="p">.</span><span class="nx">scrollTop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">text</span><span class="p">.</span><span class="nx">scrollHeight</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>
<p>If there are some actions upon leaving the parent element, e.g. an animation runs in <code class="highlight"><span class="nx">parent</span><span class="p">.</span><span class="nx">onmouseout</span></code>, we usually don’t want it when the pointer just goes deeper into <code>#parent</code>.</br>
To avoid it, we can check <code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">relatedTarget</span></code> in the handler and, if the mouse is still inside the element, then ignore such event.</br>
Alternatively we can use other events: <code>mouseenter</code> and <code>mouseleave</code>, see next point.</p>
<h5 id="mouseenterleave">mouseenter/leave</h5>
<p><code>mouseenter/mouseleave</code> like <code>mouseover/mouseout</code> trigger when the mouse pointer enters/leaves the element.</p>
<p>But there are two important differences:</p>
<ol>
<li>Transitions inside the element, <ins>to/from descendants</ins>, are <strong>not counted</strong>.</li>
<li>Events <code>mouseenter/mouseleave</code> <strong>do not bubble</strong>.</li>
</ol>
<p>So if in the example form previous point above we'll change the events on top element <code class="highlight"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#39;parent&#39;</span> <span class="err">...</span> <span class="p">&gt;</span></code>  from <code>mouseover/mouseout</code> to <code>mouseenter/mouseleave</code>, we'll see that he only generated events are the ones related to moving the pointer in and out of the top element. Nothing happens when the pointer goes to the child and back. Transitions between descendants are ignored.</p>
<h5 id="event-delegation-example">event delegation example</h5>
<p>Highlighting <code>TD</code> elements as the mouse travels across them:</p>
<p>Beacuse of limitation of "not-bubbling" of the <code>mouseenter/mouseleave</code> events we use <code>mouseover/mouseout</code> events for "delegation" event handling pattern.</p>
<p>In our case we’d like to handle transitions between table cells <code class="highlight"><span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span></code>: entering a cell and leaving it. Other transitions, such as inside the cell or outside of any cells, don’t interest us. Let’s filter them out.</p>
<p>Here’s what we can do:</p>
<ul>
<li>Remember the currently highlighted <code class="highlight"><span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span></code> in a variable, let’s call it <code>currentElem</code>.</li>
<li>On <code>mouseover</code> – ignore the event if we’re still inside the current <code class="highlight"><span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span></code>.</li>
<li>On <code>mouseout</code> – ignore if we didn’t leave the current <code class="highlight"><span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span></code>.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;!DOCTYPE HTML&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">#</span><span class="nn">text</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">block</span><span class="p">;</span>
<span class="w">      </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">px</span><span class="p">;</span>
<span class="w">      </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">456</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">table</span><span class="w"> </span><span class="nt">th</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">text-align</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span>
<span class="w">      </span><span class="k">font-weight</span><span class="p">:</span><span class="w"> </span><span class="kc">bold</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">table</span><span class="w"> </span><span class="nt">td</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="kt">px</span><span class="p">;</span>
<span class="w">      </span><span class="k">white-space</span><span class="p">:</span><span class="w"> </span><span class="kc">nowrap</span><span class="p">;</span>
<span class="w">      </span><span class="k">text-align</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span>
<span class="w">      </span><span class="k">vertical-align</span><span class="p">:</span><span class="w"> </span><span class="kc">bottom</span><span class="p">;</span>
<span class="w">      </span><span class="k">padding-top</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
<span class="w">      </span><span class="k">padding-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="kt">px</span><span class="p">;</span>
<span class="w">      </span><span class="k">cursor</span><span class="p">:</span><span class="w"> </span><span class="kc">pointer</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">table</span><span class="w"> </span><span class="p">.</span><span class="nc">nw</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#999</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">table</span><span class="w"> </span><span class="p">.</span><span class="nc">n</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#03f</span><span class="p">;</span>
<span class="w">      </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#fff</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">table</span><span class="w"> </span><span class="p">.</span><span class="nc">ne</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#ff6</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">table</span><span class="w"> </span><span class="p">.</span><span class="nc">w</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#ff0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">table</span><span class="w"> </span><span class="p">.</span><span class="nc">c</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#60c</span><span class="p">;</span>
<span class="w">      </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#fff</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">table</span><span class="w"> </span><span class="p">.</span><span class="nc">e</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#09f</span><span class="p">;</span>
<span class="w">      </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#fff</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">table</span><span class="w"> </span><span class="p">.</span><span class="nc">sw</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#963</span><span class="p">;</span>
<span class="w">      </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#fff</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">table</span><span class="w"> </span><span class="p">.</span><span class="nc">s</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#f60</span><span class="p">;</span>
<span class="w">      </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#fff</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">table</span><span class="w"> </span><span class="p">.</span><span class="nc">se</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#0c3</span><span class="p">;</span>
<span class="w">      </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#fff</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">table</span><span class="w"> </span><span class="p">.</span><span class="nc">highlight</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="kc">red</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">table</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;table&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">th</span> <span class="na">colspan</span><span class="o">=</span><span class="s">&quot;3&quot;</span><span class="p">&gt;&lt;</span><span class="nt">em</span><span class="p">&gt;</span>Bagua<span class="p">&lt;/</span><span class="nt">em</span><span class="p">&gt;</span> Chart: Direction, Element, Color, Meaning<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nw&quot;</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Northwest<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Metal
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Silver
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Elders
      <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;n&quot;</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>North<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Water
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Blue
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Change
      <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;ne&quot;</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Northeast<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Earth
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Yellow
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Direction
      <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;w&quot;</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>West<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Metal
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Gold
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Youth
      <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;c&quot;</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Center<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>All
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Purple
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Harmony
      <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;e&quot;</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>East<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Wood
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Blue
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Future
      <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;sw&quot;</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Southwest<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Earth
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Brown
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Tranquility
      <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;s&quot;</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>South<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Fire
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Orange
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Fame
      <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;se&quot;</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Southeast<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Wood
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Green
        <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>Romance
      <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>

  <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">textarea</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;text&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">textarea</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;text.value=&#39;&#39;&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Clear&quot;</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">    </span><span class="c1">// &lt;td&gt; under the mouse right now (if any)</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">currentElem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>

<span class="w">    </span><span class="nx">table</span><span class="p">.</span><span class="nx">onmouseover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// before entering a new element, the mouse always leaves the previous one</span>
<span class="w">      </span><span class="c1">// if currentElem is set, we didn&#39;t leave the previous &lt;td&gt;,</span>
<span class="w">      </span><span class="c1">// that&#39;s a mouseover inside it, ignore the event</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">currentElem</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span>

<span class="w">      </span><span class="kd">let</span><span class="w"> </span><span class="nx">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="s1">&#39;td&#39;</span><span class="p">);</span>

<span class="w">      </span><span class="c1">// we moved not into a &lt;td&gt; - ignore</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">target</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span>

<span class="w">      </span><span class="c1">// moved into &lt;td&gt;, but outside of our table (possible in case of nested tables)</span>
<span class="w">      </span><span class="c1">// ignore</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">table</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">target</span><span class="p">))</span><span class="w"> </span><span class="k">return</span><span class="p">;</span>

<span class="w">      </span><span class="c1">// hooray! we entered a new &lt;td&gt;</span>
<span class="w">      </span><span class="nx">currentElem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">target</span><span class="p">;</span>
<span class="w">      </span><span class="nx">onEnter</span><span class="p">(</span><span class="nx">currentElem</span><span class="p">);</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="nx">table</span><span class="p">.</span><span class="nx">onmouseout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// if we&#39;re outside of any &lt;td&gt; now, then ignore the event</span>
<span class="w">      </span><span class="c1">// that&#39;s probably a move inside the table, but out of &lt;td&gt;,</span>
<span class="w">      </span><span class="c1">// e.g. from &lt;tr&gt; to another &lt;tr&gt;</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">currentElem</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span>

<span class="w">      </span><span class="c1">// we&#39;re leaving the element – where to? Maybe to a descendant?</span>
<span class="w">      </span><span class="kd">let</span><span class="w"> </span><span class="nx">relatedTarget</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">relatedTarget</span><span class="p">;</span>

<span class="w">      </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nx">relatedTarget</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// go up the parent chain and check – if we&#39;re still inside currentElem</span>
<span class="w">        </span><span class="c1">// then that&#39;s an internal transition – ignore it</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">relatedTarget</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">currentElem</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span>

<span class="w">        </span><span class="nx">relatedTarget</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">relatedTarget</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>

<span class="w">      </span><span class="c1">// we left the &lt;td&gt;. really.</span>
<span class="w">      </span><span class="nx">onLeave</span><span class="p">(</span><span class="nx">currentElem</span><span class="p">);</span>
<span class="w">      </span><span class="nx">currentElem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="c1">// any functions to handle entering/leaving an element</span>
<span class="w">    </span><span class="kd">function</span><span class="w"> </span><span class="nx">onEnter</span><span class="p">(</span><span class="nx">elem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">background</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;pink&#39;</span><span class="p">;</span>

<span class="w">      </span><span class="c1">// show that in textarea</span>
<span class="w">      </span><span class="nx">text</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="sb">`over -&gt; </span><span class="si">${</span><span class="nx">currentElem</span><span class="p">.</span><span class="nx">tagName</span><span class="si">}</span><span class="sb">.</span><span class="si">${</span><span class="nx">currentElem</span><span class="p">.</span><span class="nx">className</span><span class="si">}</span><span class="sb">\n`</span><span class="p">;</span>
<span class="w">      </span><span class="nx">text</span><span class="p">.</span><span class="nx">scrollTop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1e6</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">function</span><span class="w"> </span><span class="nx">onLeave</span><span class="p">(</span><span class="nx">elem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">background</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>

<span class="w">      </span><span class="c1">// show that in textarea</span>
<span class="w">      </span><span class="nx">text</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="sb">`out &lt;- </span><span class="si">${</span><span class="nx">elem</span><span class="p">.</span><span class="nx">tagName</span><span class="si">}</span><span class="sb">.</span><span class="si">${</span><span class="nx">elem</span><span class="p">.</span><span class="nx">className</span><span class="si">}</span><span class="sb">\n`</span><span class="p">;</span>
<span class="w">      </span><span class="nx">text</span><span class="p">.</span><span class="nx">scrollTop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1e6</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>
<h3 id="dragndrop-with-mouse-eventstodo">Drag'n'Drop with mouse events(TODO)</h3>
<p>TODO: <a href="https://javascript.info/mouse-drag-and-drop" target="_blank">https://javascript.info/mouse-drag-and-drop</a></p>
<object data="../DOM_Drag-and-drop-events.pdf" type="application/pdf" class="pdf"></object>

<h3 id="pointer-eventstodo">Pointer events(TODO)</h3>
<p>TODO: <a href="https://javascript.info/pointer-events" target="_blank">https://javascript.info/pointer-events</a></p>
<h3 id="keyboard-events">Keyboard events</h3>
<p>Pressing a key always generates a keyboard events:</p>
<ul>
<li><code>keypress</code>(legacy) – no need to use anymore!</li>
<li><code>keydown</code> – on pressing the key (<em>auto-repeats</em>, i.e. triggers again and again if the key is pressed for long)</li>
<li><code>keyup</code> – on releasing the key</li>
</ul>
<p>The only exception is <span class="keys"><kbd class="key-function">Fn</kbd></span> key, because it’s often implemented on lower level than OS.</p>
<p>Main keyboard event properties:</p>
<ul>
<li><code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span><span class="o">/</span><span class="nx">charCode</span><span class="o">/</span><span class="nx">which</span></code>(legacy, they use <a href="https://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes" target="_blank">Javascript Char Codes (Key Codes)</a> as their value) - no need to use anymore!</li>
<li>
<p><code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">code</span></code> – the “key code” specific to the physical location of the key on keyboard. Key codes described in the <a href="https://www.w3.org/TR/uievents-code/" target="_blank">UI Events code specification</a>.</p>
<p>For instance:</p>
<ul>
<li>
<p>Letter keys have codes <code>Key&lt;letter&gt;</code>: <code>KeyA</code>, <code>KeyB</code> etc.</p>
<p>There are several widespread keyboard layouts, and the specification gives key codes for each of them.</br>
Read the <a href="https://www.w3.org/TR/uievents-code/#key-alphanumeric-section" target="_blank">alphanumeric section of the spec</a> for more codes.</p>
</li>
<li>
<p>Digit keys have codes: <code>Digit&lt;number&gt;</code>: <code>Digit0</code>, <code>Digit1</code> etc.</p>
</li>
<li>
<p>Special keys are mostly coded by their names: <code>Enter</code>, <code>Backspace</code>, <code>Tab</code>,<code>ShiftRight</code> ,<code>ShiftLeft</code> , <code>F1</code> etc.</p>
</li>
</ul>
</li>
<li>
<p><code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">key</span></code> – the character (<code>"A"</code>, <code>"a"</code> and so on), for non-character keys, such as <span class="keys"><kbd class="key-escape">Esc</kbd></span>, usually has the same value as <code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">code</span></code>.</p>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title"><code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">key</span></code> vs. <code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">code</span></code></p>
<p>To handle <ins>keyboard layout-dependant</ins> keys → <code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">key</span></code> is the way to go.</br>
Because same letters in different layouts may map to different physical keys, leading to different codes.</br>
See the full list in the <a href="https://www.w3.org/TR/uievents-code/#table-key-code-alphanumeric-writing-system" target="_blank">specification</a>.</p>
<p>To get a <strong>hotkey</strong> to work even after a <ins>language</ins> switch → <code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">code</span></code> may be better.</p>
</div>
<ul>
<li><code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">repeat</span></code> - for events triggered by <em>auto-repeat</em> this property set to <code>true</code>(defatul value is <code>fasle</code>)</li>
</ul>
<p>Examples:</p>
<ul>
<li>
<p>Preventing default acitons on <code>keydown</code>:</p>
<p>We can cancel most of them, with the exception of OS-based special keys. For instance, on Windows <span class="keys"><kbd class="key-alt">Alt</kbd><span>+</span><kbd class="key-f4">F4</kbd></span> closes the current browser window. And there’s no way to stop it by preventing the default action in JavaScript.</p>
<p>For instance, the <code class="highlight"><span class="p">&lt;</span><span class="nt">input</span><span class="p">&gt;</span></code> below expects a phone number, so it does not accept keys except digits, <code>+</code>, <code>()</code>, <code>-</code>, <code>Left</code>, <code>Right</code>, <code>Delete</code>, <code>Backspace</code>:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">checkPhoneKey</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="nx">key</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;0&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">key</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="s1">&#39;9&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">||</span>
<span class="w">    </span><span class="p">[</span><span class="s1">&#39;+&#39;</span><span class="p">,</span><span class="s1">&#39;(&#39;</span><span class="p">,</span><span class="s1">&#39;)&#39;</span><span class="p">,</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="s1">&#39;ArrowLeft&#39;</span><span class="p">,</span><span class="s1">&#39;ArrowRight&#39;</span><span class="p">,</span><span class="s1">&#39;Delete&#39;</span><span class="p">,</span><span class="s1">&#39;Backspace&#39;</span><span class="p">].</span><span class="nx">includes</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">onkeydown</span><span class="o">=</span><span class="s">&quot;return checkPhoneKey(event.key)&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Phone, please&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;tel&quot;</span><span class="p">&gt;</span>
</code></pre></div>
<p>The onkeydown handler here uses checkPhoneKey to check for the key pressed. If it’s valid, then it returns <code>true</code>, otherwise <code>false</code>.</br>
As we know, the <code>false</code> value returned from the event handler, assigned using a DOM property or an attribute, such as above, prevents the default action, so nothing appears in the <code class="highlight"><span class="p">&lt;</span><span class="nt">input</span><span class="p">&gt;</span></code> for keys that don’t pass the test. (The <code>true</code> value returned doesn’t affect anything, only returning <code>false</code> matters)</p>
</li>
<li>
<p>Text characters limit counter:</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&quot;X-UA-Compatible&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;IE=edge&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Document<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">.</span><span class="nc">textarea</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">.</span><span class="nc">textarea__item</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="kt">px</span><span class="p">;</span>
<span class="w">        </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="kt">px</span><span class="p">;</span>
<span class="w">        </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="w">        </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="kt">px</span><span class="p">;</span>
<span class="w">        </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#fff</span><span class="p">;</span>
<span class="w">        </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="nb">rgb</span><span class="p">(</span><span class="mi">44</span><span class="p">,</span><span class="w"> </span><span class="mi">43</span><span class="p">,</span><span class="w"> </span><span class="mi">43</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">.</span><span class="nc">textarea__counter</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;textarea&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">textarea</span> <span class="na">autocomplete</span><span class="o">=</span><span class="s">&quot;off&quot;</span> <span class="na">maxlength</span><span class="o">=</span><span class="s">&quot;30&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;form[]&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;textarea__item&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">textarea</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;textarea__counter&quot;</span><span class="p">&gt;</span>Осталось <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span> символов<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">txtItem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.textarea__item&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">txtItemLimit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">txtItem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;maxlength&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">txtCounter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.textarea__counter span&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">txtCounter</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">txtItemLimit</span><span class="p">;</span>

<span class="w">    </span><span class="nx">txtItem</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;keyup&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">txtSetCounter</span><span class="p">);</span>
<span class="w">    </span><span class="nx">txtItem</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;keydown&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">repeat</span><span class="p">)</span><span class="w"> </span><span class="nx">txtSetCounter</span><span class="p">();</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="kd">function</span><span class="w"> </span><span class="nx">txtSetCounter</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">txtCounterResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">txtItemLimit</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">txtItem</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
<span class="w">      </span><span class="nx">txtCounter</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">txtCounterResult</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>
</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Not 100% reliable.</p>
<p>In the past, keyboard events were sometimes used to track user input in form fields. That’s not reliable, because the input can come from various sources(e.g. mobile keyboards formally known as IME(Input-Method Editor)). We have <code>input</code> and <code>change</code> events to handle any input (covered in <a href="https://javascript.info/events-change-input" target="_blank">TODO: Events: change, input, cut, copy, paste</a>). They trigger after any kind of input, including copy-pasting or speech recognition.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">We should use keyboard events when we really want keyboard.</p>
<p>For example, to react on hotkeys or special keys.</p>
</div>
<h3 id="scrolling">Scrolling</h3>
<p><code>scroll</code> event - allows reacting to a page or element scrolling</p>
<p>May be used for:</p>
<ul>
<li>Show/hide additional controls or information depending on where in the document the user is.</li>
<li>Load more data when the user scrolls down till the end of the page.</li>
</ul>
<p><strong>BUT:</strong> there is more interesting way to implement these(and many others) functionalitis by using <em>IntersectionObserver</em> which allows asynchronously watch for <ins>intersection</ins> of the element with his parent or visible document area.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// a small function to show the current scroll:</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;scroll&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;showScroll&#39;</span><span class="p">).</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">pageYOffset</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;px&#39;</span><span class="p">;</span>
<span class="p">});</span>
<span class="cm">/*</span>
<span class="cm">In action:</span>
<span class="cm">  - The &#39;scroll&#39; event works both on the &#39;window&#39; and on scrollable elements.</span>
<span class="cm">*/</span>
</code></pre></div>
<h4 id="prevent-scrolling">Prevent scrolling</h4>
<p>We can’t prevent scrolling by using <code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span></code> in onscroll listener, because it triggers after the scroll has already happened.</br>
But we can prevent scrolling by <code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span></code> on an event that causes the scroll, for instance <code>keydown</code> event for <span class="keys"><kbd class="key-page-up">Page Up</kbd></span> and <span class="keys"><kbd class="key-page-down">Page Down</kbd></span>.</br>
If we add an event handler to these events and <code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span></code> in it, then the scroll won’t start.</p>
<p><strong>BUT:</strong> There are many ways to initiate a scroll, so it’s <ins>more reliable</ins> to use CSS, <code class="highlight"><span class="nt">overflow</span><span class="o">:</span><span class="w"> </span><span class="nt">hidden</span><span class="o">;</span></code> property.</p>
<h2 id="document-and-resource-loading">Document and resource loading</h2>
<h3 id="page-domcontentloaded-load-beforeunload-unload">Page: <code>DOMContentLoaded</code>, <code>load</code>, <code>beforeunload</code>, <code>unload</code></h3>
<p>Page load events:</p>
<ul>
<li>
<p><code>DOMContentLoaded</code> - triggers on <code>document</code> when the browser fully loaded HTML, and the DOM tree is built, but external resources like <ins>pictures <code class="highlight"><span class="p">&lt;</span><span class="nt">img</span><span class="p">&gt;</span></code></ins> and <ins>stylesheets</ins>, etc. may not yet have loaded.</p>
<p><em>Usage:</em> the handler can lookup DOM nodes, initialize the interface.</p>
<p>We must use <code class="highlight"><span class="nx">addEventListener</span></code> to catch it:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">ready</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;DOM is ready&#39;</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// image is not yet loaded (unless it was cached), so the size is 0x0</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="sb">`Image size: </span><span class="si">${</span><span class="nx">img</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="si">}</span><span class="sb">x</span><span class="si">${</span><span class="nx">img</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="cm">/*</span>
<span class="cm">  The &#39;DOMContentLoaded&#39; handler runs when the document is loaded,</span>
<span class="cm">  so it can see all the elements, including &lt;img&gt; below.</span>
<span class="cm">  But it doesn’t wait for the image to load. So &#39;alert&#39; shows zero sizes.</span>
<span class="cm">   */</span>
<span class="w">  </span><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;DOMContentLoaded&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">ready</span><span class="p">);</span>
<span class="w">  </span><span class="c1">// not &quot;document.onDOMContentLoaded = ...&quot;</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">img</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;img&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://en.js.cx/clipart/train.gif?speed=1&amp;cache=0&quot;</span><span class="p">&gt;</span>
</code></pre></div>
<p>Peculiarities(особенности) regarding  <code>DOMContentLoaded</code> event running:</p>
<ol>
<li>
<p>Script such as <code class="highlight"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;...&lt;/</span><span class="nt">script</span><span class="p">&gt;</span></code> or <code class="highlight"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;...&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span></code> block DOMContentLoaded.</p>
<p>When the browser processes an HTML-document and comes across a <code class="highlight"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span></code> tag, it needs to execute before continuing building the DOM. That’s a precaution, as scripts may want to modify DOM, and even <code class="highlight"><span class="nb">document</span><span class="p">.</span><span class="nx">write</span></code> into it, so <code>DOMContentLoaded</code> has to wait.</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- we first see “Library loaded…”, and then “DOM ready!” (all scripts are executed) --&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;DOMContentLoaded&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;DOM ready!&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">});</span>

<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.3.0/lodash.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Library loaded, inline script executed&quot;</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Scripts that don’t block DOMContentLoaded.</p>
<p>There are two exceptions from this rule:</p>
<ol>
<li>Scripts with the <code>async</code> attribute, don’t block <code>DOMContentLoaded</code>. See <a href="https://javascript.info/script-async-defer" target="_blank">TODO: https://javascript.info/script-async-defer</a></li>
<li>Scripts that are generated dynamically with <code class="highlight"><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">)</span></code> and then added to the webpage also don’t block this event.</li>
</ol>
</div>
</li>
<li>
<p>Images and other resources may also still continue loading.</p>
<p>External style sheets don’t affect DOM, so <code>DOMContentLoaded</code> does not wait for them.</p>
<p><strong>BUT:</strong> If we have a script after the style, then that script must wait until the stylesheet loads:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">link</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;style.css&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="c1">// the script doesn&#39;t execute until the stylesheet is loaded</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">).</span><span class="nx">marginTop</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
<p>The reason for this is that the script may want to get coordinates and other style-dependent properties of elements, like in the example above. Naturally, it has to wait for styles to load.</br>
As <code>DOMContentLoaded</code> waits for scripts, it now waits for styles before them as well.</p>
</li>
<li>
<p>Built-in browser autofill.</p>
<p>Firefox, Chrome and Opera autofill forms on <code>DOMContentLoaded</code>.</p>
<p>For instance, if the page has a form with login and password, and the browser remembered the values, then on <code>DOMContentLoaded</code> it may try to autofill them (if approved by the user).</p>
<p>So if <code>DOMContentLoaded</code> is postponed by long-loading scripts, then autofill also awaits – the login/password fields don’t get autofilled immediately, but there’s a delay till the page fully loads. That’s actually the delay until the <code>DOMContentLoaded</code> event.</p>
</li>
</ol>
</li>
<li>
<p><code>load</code> - triggers on <code>window</code> when the page and all external resources(images, styles etc.) are loaded.</p>
<p><em>Usage:</em> external resources are loaded, so styles are applied, image sizes are known etc. We rarely use it, because there’s usually no need to wait for so long.</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- correctly shows image sizes, because &#39;window.onload&#39; waits for all images: --&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="nb">window</span><span class="p">.</span><span class="nx">onload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// can also use window.addEventListener(&#39;load&#39;, (event) =&gt; {</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Page loaded&#39;</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// image is loaded at this time</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="sb">`Image size: </span><span class="si">${</span><span class="nx">img</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="si">}</span><span class="sb">x</span><span class="si">${</span><span class="nx">img</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">  </span><span class="p">};</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">img</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;img&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://en.js.cx/clipart/train.gif?speed=1&amp;cache=0&quot;</span><span class="p">&gt;</span>
</code></pre></div>
</li>
<li>
<p><code>beforeunload</code> - triggers on <code>window</code> when the user initiated navigation away from the page or tries to close the window; in this case the handler asks for additional confirmation</p>
<p><em>Usage:</em> cancel the transition to another page - if we <ins>cancel the event</ins>, browser asks whether the user really wants to leave(e.g. we have unsaved changes).</p>
<div class="highlight"><pre><span></span><code><span class="nb">window</span><span class="p">.</span><span class="nx">onbeforeunload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>
<p>For historical reasons, returning a non-empty string also counts as <em>canceling the event</em>. Some time ago browsers used to show it as a message, but as the <a href="https://html.spec.whatwg.org/#unloading-documents" target="_blank">modern specification</a> says, they shouldn’t.</br>
The behavior was changed, because some webmasters abused this event handler by showing misleading and annoying messages. So right now old browsers still may show it as a message, but aside of that – there’s no way to customize the message shown to the user.</p>
<div class="highlight"><pre><span></span><code><span class="nb">window</span><span class="p">.</span><span class="nx">onbeforeunload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="s2">&quot;There are unsaved changes. Leave now?&quot;</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">The <code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span></code> doesn’t work from a <code>beforeunload</code> handler</p>
<p>That may sound weird, but most browsers ignore <code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span></code>.</br>
Which means, following code may not work:</p>
<div class="highlight"><pre><span></span><code><span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;beforeunload&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// doesn&#39;t work, so this event handler doesn&#39;t do anything</span>
<span class="w">  </span><span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div>
<p>Instead, in <em>such handlers</em> one should set <code class="highlight"><span class="nx">event</span><span class="p">.</span><span class="nx">returnValue</span></code> to a string to get the result similar to the code above:</p>
<div class="highlight"><pre><span></span><code><span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;beforeunload&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// works, same as returning from window.onbeforeunload</span>
<span class="w">  </span><span class="nx">event</span><span class="p">.</span><span class="nx">returnValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;There are unsaved changes. Leave now?&quot;</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div>
</div>
</li>
<li>
<p><code>unload</code> - triggers on <code>window</code> when the user is finally leaving</p>
<p><em>Usage:</em> the user almost left and in the handler we can only do simple things that do not involve delays or asking a user. Because of that limitation, it’s rarely used. For instanse:</p>
<ul>
<li>we can close related popup windows</li>
<li>
<p>we can send out a network request with a special <code class="highlight"><span class="nx">navigator</span><span class="p">.</span><span class="nx">sendBeacon</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">)</span></code> method (described in the specification <a href="https://w3c.github.io/beacon/" target="_blank">https://w3c.github.io/beacon/</a>), that contains e.g. the data about how the page is used: mouse clicks, scrolls, viewed page areas, and so on</p>
<p><code class="highlight"><span class="nx">sendBeacon</span></code> sends data in background without delaying the  transition to another page: the browser leaves the page, but still performs <code class="highlight"><span class="nx">sendBeacon</span></code>. Here’s how to use it:</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nx">analyticsData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* object with gathered data */</span><span class="w"> </span><span class="p">};</span>

<span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;unload&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">navigator</span><span class="p">.</span><span class="nx">sendBeacon</span><span class="p">(</span><span class="s2">&quot;/analytics&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">analyticsData</span><span class="p">));</span>
<span class="p">});</span>
</code></pre></div>
<ol>
<li>the request is sent as POST</li>
<li>we can send not only a string, but also forms and other formats(see <a href="https://javascript.info/fetch" target="_blank">Fetch</a>), but usually it’s a stringified object</li>
<li>the data is limited by 64kb</li>
</ol>
<p>When the <code class="highlight"><span class="nx">sendBeacon</span></code> request is finished, the browser probably has already left the document, so there’s no way to get server response (which is usually empty for analytics).</br>
  There’s also a <code>keepalive</code> flag for doing such “after-page-left” requests in fetch method for generic network requests. You can find more information in the chapter <a href="https://javascript.info/fetch-api" target="_blank">Fetch API</a>.</p>
</li>
</ul>
</li>
<li>
<p><code>readystatechange</code> - tracks the changes in value of the <code class="highlight"><span class="nb">document</span><span class="p">.</span><span class="nx">readyState</span></code> method(see below at this point)</p>
<p>It is an alternative mechanics of tracking the document loading state, it appeared long ago. <ins>Nowadays, it is rarely used.</ins></p>
<div class="highlight"><pre><span></span><code><span class="c1">// current state</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">readyState</span><span class="p">);</span><span class="w"> </span><span class="c1">// prints &#39;loading&#39;</span>
<span class="c1">// print state changes</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;readystatechange&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">readyState</span><span class="p">));</span><span class="w"> </span><span class="c1">// prints &#39;interactive&#39; and then &#39;complete&#39;</span>
</code></pre></div>
</li>
</ul>
<p><strong><em>document</em>.readyState</strong> - current state of the document, has 3 following values:</p>
<ul>
<li><code>loading</code> – the document is loading.</li>
<li><code>interactive</code> – the document is parsed(= was fully read), happens at about the same time as <code>DOMContentLoaded</code>, but before it.</li>
<li><code>complete</code> – the document and resources are loaded(= was fully read and all resources(like images) are loaded too), happens at about the same time as <code>window.onload</code>, but before it</li>
</ul>
<p>We can check <code class="highlight"><span class="nb">document</span><span class="p">.</span><span class="nx">readyState</span></code> and setup a handler or execute the code immediately if it’s ready, like this:</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">work</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/*...*/</span><span class="w"> </span><span class="p">}</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">readyState</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;loading&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// still loading, wait for the event</span>
<span class="w">  </span><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;DOMContentLoaded&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">work</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// DOM is ready!</span>
<span class="w">  </span><span class="nx">work</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2023-01-26T18:33:00+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2023-01-26</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.indexes"], "search": "../../../../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.51d95adb.min.js"></script>
      
        <script src="../../../../../js/timeago.min.js"></script>
      
        <script src="../../../../../js/timeago_mkdocs_material.js"></script>
      
        <script src="../../../../../javascripts/extra.js"></script>
      
    
  </body>
</html>